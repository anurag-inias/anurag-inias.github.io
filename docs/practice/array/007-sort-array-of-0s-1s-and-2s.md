# Partitioning

<style>
.md-logo img {
  content: url('/algorithms/partition/split-light.svg');
}

:root [data-md-color-scheme=slate] .md-logo img  {
  content: url('/algorithms/partition/split-dark.svg');
}
</style>

## Two-way partition

=== "pseudocode"

    ```ruby linenums="1"
    parition(nums):
      cursor = 0, pivot  = nums[0]

      for i in [1, nums.size):
        if nums[i] < pivot:
          swap(cursor++, i)
    
      swap(0, cursor - 1)
    ```

=== "kotlin"

    ```kotlin linenums="1"
    // returns the index of pivot
	fun MutableList<Int>.partitionTwoWay(pivotIndex: Int = 0): Int {
	  if (size < 2) return size-1
	  if (pivotIndex != 0) swap(0, pivotIndex)

	  var cursor = 1; val pivot = this[0]

	  for (i in 1..<size)
	    if (this[i] < pivot)
	      swap(cursor++, i)

	  cursor-- // cursor was left in second half
	  swap(cursor, 0)
	  return cursor
	}

	fun <T> MutableList<T>.swap(i: Int, j: Int) {
	  val t = this[i]
	  this[i] = this[j]
	  this[j] = t
	}
    ```

=== "tests"

    ```kotlin linenums="1"
	package partition

	import org.junit.jupiter.api.Assertions.*
	import org.junit.jupiter.api.Test
	import java.util.concurrent.ThreadLocalRandom
	import kotlin.streams.toList

	class PartitionTest {

	  private lateinit var list: MutableList<Int>

	  @Test
	  fun testEmpty() {
	    list = mutableListOf()
	    list.partitionTwoWay()
	    assertEquals(listOf<Int>(), list)
	  }

	  @Test
	  fun testSingle() {
	    list = mutableListOf(9)
	    list.partitionTwoWay()
	    assertEquals(listOf(9), list)
	  }

	  @Test
	  fun testDouble() {
	    list = mutableListOf(1, 2)
	    list.partitionTwoWay()
	    assertEquals(listOf(1, 2), list)

	    list = mutableListOf(2, 1)
	    list.partitionTwoWay()
	    assertEquals(listOf(1, 2), list)
	  }

	  @Test
	  fun testTriple() {
	    list = mutableListOf(1, 2, 3)
	    list.partitionTwoWay(1)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(1, 3, 2)
	    list.partitionTwoWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(2, 1, 3)
	    list.partitionTwoWay(0)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(2, 3, 1)
	    list.partitionTwoWay(0)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(3, 1, 2)
	    list.partitionTwoWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(3, 2, 1)
	    list.partitionTwoWay(1)
	    assertEquals(listOf(1, 2, 3), list)
	  }

	  @Test
	  fun fuzzy() {
	    val nums = ThreadLocalRandom.current().ints(100, 0, 80).toList().toMutableList()
	    val copy = nums.stream().toList().toMutableList().sorted()

	    nums.sortByPartition()

	    assertEquals(copy, nums)
	  }

      // basically quicksort
	  private fun MutableList<Int>.sortByPartition() {
	    if (size < 2) return

	    val pivotIndex = partitionTwoWay()

	    val left = this.subList(0, pivotIndex).toMutableList()
	    val right = this.subList(pivotIndex + 1, size).toMutableList()

	    left.sortByPartition()
	    right.sortByPartition()

	    for (i in 0..<left.size)
	      this[i] = left[i]
	    for (i in 0..<right.size)
	      this[pivotIndex + i + 1] = right[i]
	  }
	}
    ``` 

<div class="grid" markdown>   

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 368.1437614097616 405.67652839694" width="100%">
  <g stroke-linecap="round" transform="translate(59.48203666844509 193.72641261229597) rotate(0 11.453109372621725 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.53 4.34, 3.32 2.28, 4.99 0.36 M-0.26 6.4 C1.62 4.23, 3.51 2.06, 4.99 0.36 M0.13 12.04 C2.25 9.61, 4.36 7.18, 10.63 -0.03 M0.13 12.04 C2.4 9.43, 4.67 6.82, 10.63 -0.03 M-0.13 18.44 C4.69 12.89, 9.52 7.34, 15.62 0.33 M-0.13 18.44 C5.51 11.95, 11.15 5.46, 15.62 0.33 M0.27 24.08 C6.42 17, 12.57 9.93, 21.26 -0.07 M0.27 24.08 C6.28 17.17, 12.29 10.25, 21.26 -0.07 M0 30.48 C5.99 23.6, 11.97 16.72, 23.62 3.31 M0 30.48 C7.06 22.37, 14.11 14.25, 23.62 3.31 M4.34 31.59 C8.23 27.11, 12.12 22.64, 23.36 9.71 M4.34 31.59 C9.43 25.73, 14.53 19.86, 23.36 9.71 M9.98 31.2 C13.61 27.02, 17.25 22.84, 23.76 15.35 M9.98 31.2 C14.4 26.12, 18.82 21.03, 23.76 15.35 M14.97 31.56 C17.67 28.45, 20.37 25.34, 23.49 21.75 M14.97 31.56 C16.8 29.45, 18.63 27.35, 23.49 21.75 M20.61 31.17 C21.64 29.98, 22.67 28.79, 23.23 28.15 M20.61 31.17 C21.18 30.51, 21.75 29.86, 23.23 28.15" stroke="#a5d8ff" stroke-width="0.5" fill="none"></path><path d="M0 0 C8.84 0, 17.69 0, 22.91 0 M0 0 C8.23 0, 16.47 0, 22.91 0 M22.91 0 C22.91 9.21, 22.91 18.43, 22.91 31.08 M22.91 0 C22.91 8.73, 22.91 17.46, 22.91 31.08 M22.91 31.08 C14.43 31.08, 5.95 31.08, 0 31.08 M22.91 31.08 C15.98 31.08, 9.05 31.08, 0 31.08 M0 31.08 C0 20.22, 0 9.35, 0 0 M0 31.08 C0 21.37, 0 11.66, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(60.121701870729936 42.001297390485604) rotate(0 11.453109372621725 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.43 4.46, 3.11 2.52, 4.99 0.36 M-0.26 6.4 C1 4.95, 2.25 3.51, 4.99 0.36 M0.13 12.04 C2.68 9.11, 5.23 6.18, 10.63 -0.03 M0.13 12.04 C4.31 7.23, 8.49 2.43, 10.63 -0.03 M-0.13 18.44 C3.1 14.73, 6.32 11.02, 15.62 0.33 M-0.13 18.44 C3.49 14.28, 7.1 10.12, 15.62 0.33 M0.27 24.08 C8.41 14.71, 16.56 5.34, 21.26 -0.07 M0.27 24.08 C5.25 18.35, 10.23 12.62, 21.26 -0.07 M0 30.48 C7.37 22.01, 14.73 13.54, 23.62 3.31 M0 30.48 C6.16 23.39, 12.32 16.31, 23.62 3.31 M4.34 31.59 C10.24 24.8, 16.14 18.01, 23.36 9.71 M4.34 31.59 C10.94 24, 17.54 16.41, 23.36 9.71 M9.98 31.2 C14.28 26.26, 18.57 21.31, 23.76 15.35 M9.98 31.2 C14.42 26.09, 18.87 20.97, 23.76 15.35 M14.97 31.56 C17.67 28.45, 20.37 25.34, 23.49 21.75 M14.97 31.56 C17.23 28.95, 19.5 26.34, 23.49 21.75 M20.61 31.17 C21.6 30.03, 22.58 28.9, 23.23 28.15 M20.61 31.17 C21.34 30.32, 22.07 29.48, 23.23 28.15" stroke="#a5d8ff" stroke-width="0.5" fill="none"></path><path d="M0 0 C8.38 0, 16.76 0, 22.91 0 M0 0 C8.41 0, 16.81 0, 22.91 0 M22.91 0 C22.91 7.96, 22.91 15.92, 22.91 31.08 M22.91 0 C22.91 12.17, 22.91 24.34, 22.91 31.08 M22.91 31.08 C18.08 31.08, 13.26 31.08, 0 31.08 M22.91 31.08 C16.19 31.08, 9.47 31.08, 0 31.08 M0 31.08 C0 18.84, 0 6.59, 0 0 M0 31.08 C0 22.55, 0 14.02, 0 0" fill="none"></path></g><g transform="translate(68.39041123681002 40.53262800367264) rotate(0 4.92999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">p</text></g><g stroke-linecap="round" transform="translate(89.80309614089069 194.207348166187) rotate(0 61.090008588300975 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.05 4.88, 2.37 3.37, 4.99 0.36 M-0.26 6.4 C1.33 4.56, 2.93 2.73, 4.99 0.36 M0.13 12.04 C3.58 8.07, 7.03 4.11, 10.63 -0.03 M0.13 12.04 C3.99 7.6, 7.86 3.16, 10.63 -0.03 M-0.13 18.44 C3.89 13.81, 7.91 9.19, 15.62 0.33 M-0.13 18.44 C3.93 13.77, 7.99 9.1, 15.62 0.33 M0.27 24.08 C6.95 16.4, 13.62 8.71, 21.26 -0.07 M0.27 24.08 C5.52 18.03, 10.78 11.98, 21.26 -0.07 M0 30.48 C8.07 21.2, 16.14 11.92, 26.25 0.29 M0 30.48 C9.02 20.11, 18.04 9.73, 26.25 0.29 M4.34 31.59 C12.46 22.25, 20.59 12.9, 31.89 -0.1 M4.34 31.59 C10.58 24.41, 16.83 17.22, 31.89 -0.1 M9.98 31.2 C18.36 21.55, 26.75 11.91, 36.88 0.26 M9.98 31.2 C19.48 20.27, 28.99 9.33, 36.88 0.26 M14.97 31.56 C23.97 21.2, 32.97 10.85, 42.52 -0.14 M14.97 31.56 C23.59 21.64, 32.21 11.72, 42.52 -0.14 M20.61 31.17 C29.33 21.13, 38.05 11.1, 47.51 0.22 M20.61 31.17 C28.74 21.81, 36.88 12.45, 47.51 0.22 M25.6 31.53 C33.39 22.56, 41.18 13.6, 53.15 -0.17 M25.6 31.53 C33.82 22.06, 42.05 12.6, 53.15 -0.17 M31.24 31.13 C38.03 23.32, 44.83 15.5, 58.14 0.19 M31.24 31.13 C40.1 20.93, 48.97 10.74, 58.14 0.19 M36.23 31.49 C45.43 20.9, 54.64 10.31, 63.78 -0.21 M36.23 31.49 C43.03 23.67, 49.83 15.84, 63.78 -0.21 M41.21 31.85 C51.02 20.57, 60.83 9.29, 68.77 0.15 M41.21 31.85 C52.15 19.26, 63.1 6.68, 68.77 0.15 M46.86 31.46 C53.83 23.43, 60.8 15.41, 74.41 -0.24 M46.86 31.46 C57.72 18.96, 68.58 6.47, 74.41 -0.24 M51.84 31.82 C61.35 20.88, 70.86 9.94, 79.4 0.12 M51.84 31.82 C62.61 19.43, 73.38 7.05, 79.4 0.12 M57.49 31.42 C66.13 21.47, 74.78 11.52, 85.04 -0.28 M57.49 31.42 C64.39 23.48, 71.29 15.54, 85.04 -0.28 M62.47 31.78 C70.25 22.83, 78.03 13.88, 90.03 0.08 M62.47 31.78 C68.53 24.82, 74.58 17.86, 90.03 0.08 M68.12 31.39 C78.92 18.96, 89.72 6.53, 95.67 -0.31 M68.12 31.39 C76.36 21.9, 84.6 12.42, 95.67 -0.31 M73.1 31.75 C80.86 22.82, 88.62 13.89, 100.66 0.05 M73.1 31.75 C81.82 21.72, 90.54 11.69, 100.66 0.05 M78.75 31.35 C86.04 22.96, 93.34 14.57, 106.3 -0.34 M78.75 31.35 C86.93 21.94, 95.12 12.52, 106.3 -0.34 M83.73 31.71 C89.47 25.11, 95.22 18.5, 111.29 0.02 M83.73 31.71 C93.02 21.03, 102.31 10.34, 111.29 0.02 M89.38 31.32 C97.73 21.7, 106.09 12.09, 116.27 0.38 M89.38 31.32 C99.45 19.73, 109.52 8.15, 116.27 0.38 M94.36 31.68 C104.82 19.65, 115.28 7.61, 121.92 -0.02 M94.36 31.68 C101.56 23.4, 108.75 15.13, 121.92 -0.02 M100.01 31.28 C104.84 25.73, 109.67 20.17, 122.97 4.87 M100.01 31.28 C107.7 22.44, 115.39 13.59, 122.97 4.87 M104.99 31.64 C109.67 26.27, 114.34 20.89, 122.71 11.27 M104.99 31.64 C110.15 25.71, 115.32 19.77, 122.71 11.27 M110.64 31.25 C113.69 27.73, 116.75 24.21, 123.1 16.91 M110.64 31.25 C115.07 26.15, 119.5 21.05, 123.1 16.91 M115.62 31.61 C118.38 28.44, 121.13 25.28, 122.84 23.31 M115.62 31.61 C118.18 28.67, 120.74 25.73, 122.84 23.31 M121.27 31.21 C121.79 30.61, 122.31 30.01, 122.58 29.71 M121.27 31.21 C121.64 30.78, 122.02 30.35, 122.58 29.71" stroke="#ffc9c9" stroke-width="0.5" fill="none"></path><path d="M0 0 C40.06 0, 80.13 0, 122.18 0 M0 0 C27.13 0, 54.26 0, 122.18 0 M122.18 0 C122.18 10.07, 122.18 20.14, 122.18 31.08 M122.18 0 C122.18 10.59, 122.18 21.18, 122.18 31.08 M122.18 31.08 C91.97 31.08, 61.76 31.08, 0 31.08 M122.18 31.08 C87.2 31.08, 52.22 31.08, 0 31.08 M0 31.08 C0 23.6, 0 16.12, 0 0 M0 31.08 C0 24.46, 0 17.84, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(222.21083235689352 193.92950296246164) rotate(0 65.04773054076475 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C0.98 4.97, 2.21 3.55, 4.99 0.36 M-0.26 6.4 C1.63 4.22, 3.53 2.04, 4.99 0.36 M0.13 12.04 C3.79 7.83, 7.45 3.63, 10.63 -0.03 M0.13 12.04 C4.06 7.52, 7.99 3, 10.63 -0.03 M-0.13 18.44 C4.19 13.48, 8.5 8.51, 15.62 0.33 M-0.13 18.44 C4.93 12.62, 9.98 6.81, 15.62 0.33 M0.27 24.08 C5.04 18.59, 9.82 13.09, 21.26 -0.07 M0.27 24.08 C7.14 16.18, 14.01 8.27, 21.26 -0.07 M0 30.48 C5.84 23.77, 11.67 17.06, 26.25 0.29 M0 30.48 C7.16 22.24, 14.32 14.01, 26.25 0.29 M4.34 31.59 C13.75 20.77, 23.16 9.94, 31.89 -0.1 M4.34 31.59 C14.47 19.93, 24.61 8.27, 31.89 -0.1 M9.98 31.2 C18.34 21.58, 26.71 11.96, 36.88 0.26 M9.98 31.2 C16.25 23.99, 22.52 16.77, 36.88 0.26 M14.97 31.56 C25.16 19.84, 35.35 8.11, 42.52 -0.14 M14.97 31.56 C22.57 22.81, 30.18 14.05, 42.52 -0.14 M20.61 31.17 C27.16 23.63, 33.72 16.09, 47.51 0.22 M20.61 31.17 C30.58 19.7, 40.54 8.23, 47.51 0.22 M25.6 31.53 C31.53 24.7, 37.46 17.87, 53.15 -0.17 M25.6 31.53 C32.04 24.11, 38.48 16.7, 53.15 -0.17 M31.24 31.13 C39.24 21.92, 47.25 12.72, 58.14 0.19 M31.24 31.13 C39.45 21.68, 47.66 12.24, 58.14 0.19 M36.23 31.49 C44.61 21.84, 53 12.2, 63.78 -0.21 M36.23 31.49 C45.17 21.21, 54.11 10.92, 63.78 -0.21 M41.21 31.85 C47.36 24.78, 53.51 17.7, 68.77 0.15 M41.21 31.85 C46.97 25.23, 52.73 18.6, 68.77 0.15 M46.86 31.46 C54.76 22.37, 62.66 13.28, 74.41 -0.24 M46.86 31.46 C53.28 24.07, 59.7 16.68, 74.41 -0.24 M51.84 31.82 C61.34 20.89, 70.83 9.97, 79.4 0.12 M51.84 31.82 C60.25 22.15, 68.65 12.48, 79.4 0.12 M57.49 31.42 C66.73 20.78, 75.98 10.15, 85.04 -0.28 M57.49 31.42 C67.02 20.45, 76.56 9.48, 85.04 -0.28 M62.47 31.78 C69.62 23.57, 76.76 15.35, 90.03 0.08 M62.47 31.78 C72.61 20.12, 82.75 8.45, 90.03 0.08 M68.12 31.39 C74.94 23.54, 81.77 15.68, 95.67 -0.31 M68.12 31.39 C75.05 23.41, 81.98 15.44, 95.67 -0.31 M73.1 31.75 C82.41 21.04, 91.72 10.33, 100.66 0.05 M73.1 31.75 C79.29 24.63, 85.48 17.51, 100.66 0.05 M78.75 31.35 C88.2 20.48, 97.65 9.6, 106.3 -0.34 M78.75 31.35 C85.34 23.76, 91.94 16.17, 106.3 -0.34 M83.73 31.71 C89.93 24.58, 96.13 17.45, 111.29 0.02 M83.73 31.71 C90.69 23.71, 97.64 15.71, 111.29 0.02 M89.38 31.32 C99.2 20.02, 109.03 8.71, 116.27 0.38 M89.38 31.32 C94.78 25.11, 100.18 18.89, 116.27 0.38 M94.36 31.68 C103.68 20.96, 112.99 10.25, 121.92 -0.02 M94.36 31.68 C102.11 22.76, 109.86 13.85, 121.92 -0.02 M100.01 31.28 C110.26 19.49, 120.52 7.69, 126.91 0.34 M100.01 31.28 C108.84 21.12, 117.67 10.96, 126.91 0.34 M104.99 31.64 C114.42 20.8, 123.85 9.95, 130.58 2.21 M104.99 31.64 C112.47 23.05, 119.94 14.45, 130.58 2.21 M110.64 31.25 C116.36 24.67, 122.08 18.08, 130.97 7.85 M110.64 31.25 C115.04 26.18, 119.45 21.12, 130.97 7.85 M115.62 31.61 C121.37 25, 127.12 18.38, 130.71 14.25 M115.62 31.61 C120.42 26.1, 125.21 20.58, 130.71 14.25 M121.27 31.21 C123.84 28.26, 126.4 25.31, 130.45 20.65 M121.27 31.21 C124.59 27.4, 127.9 23.58, 130.45 20.65 M126.25 31.57 C127.69 29.92, 129.13 28.26, 130.85 26.29 M126.25 31.57 C127.82 29.77, 129.39 27.96, 130.85 26.29" stroke="#b2f2bb" stroke-width="0.5" fill="none"></path><path d="M0 0 C49.01 0, 98.02 0, 130.1 0 M0 0 C46.72 0, 93.44 0, 130.1 0 M130.1 0 C130.1 10.45, 130.1 20.9, 130.1 31.08 M130.1 0 C130.1 9.47, 130.1 18.94, 130.1 31.08 M130.1 31.08 C91.87 31.08, 53.64 31.08, 0 31.08 M130.1 31.08 C101.94 31.08, 73.78 31.08, 0 31.08 M0 31.08 C0 23.28, 0 15.48, 0 0 M0 31.08 C0 24.04, 0 17, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(55.85807110214441 38.052091400944335) rotate(0 151.1428451538086 19.428573608398438)"><path d="M9.71 0 C85.08 0, 160.45 0, 292.57 0 M9.71 0 C100.37 0, 191.03 0, 292.57 0 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M302.29 9.71 C302.29 16.4, 302.29 23.08, 302.29 29.14 M302.29 9.71 C302.29 16.47, 302.29 23.22, 302.29 29.14 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M292.57 38.86 C193.31 38.86, 94.05 38.86, 9.71 38.86 M292.57 38.86 C194.44 38.86, 96.3 38.86, 9.71 38.86 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M0 29.14 C0 22.41, 0 15.67, 0 9.71 M0 29.14 C0 24.23, 0 19.31, 0 9.71 M0 9.71 C0 3.24, 3.24 0, 9.71 0 M0 9.71 C0 3.24, 3.24 0, 9.71 0" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(86.66358999225972 38.62348796817432) rotate(0 -0.13637754938025637 18.955048295372947)"><path d="M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91 M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(55.31001195049393 190.05056132229294) rotate(0 151.1428451538086 19.428573608398438)"><path d="M9.71 0 C71.59 0, 133.47 0, 292.57 0 M9.71 0 C96.36 0, 183.01 0, 292.57 0 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M302.29 9.71 C302.29 15.01, 302.29 20.3, 302.29 29.14 M302.29 9.71 C302.29 14.44, 302.29 19.17, 302.29 29.14 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M292.57 38.86 C217.96 38.86, 143.35 38.86, 9.71 38.86 M292.57 38.86 C232.55 38.86, 172.52 38.86, 9.71 38.86 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M0 29.14 C0 23.32, 0 17.49, 0 9.71 M0 29.14 C0 25.05, 0 20.96, 0 9.71 M0 9.71 C0 3.24, 3.24 0, 9.71 0 M0 9.71 C0 3.24, 3.24 0, 9.71 0" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(67.8423520851596 192.53109792502124) rotate(0 4.92999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">p</text></g><g stroke-linecap="round"><g transform="translate(86.11553084060924 190.6219578895229) rotate(0 -0.13637754938025637 18.955048295372933)"><path d="M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91 M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(217.61584824241802 190.2683972242408) rotate(0 0.18064510034000136 19.317736083193807)"><path d="M0 0 C0.14 14.44, 0.27 28.87, 0.36 38.64 M0 0 C0.12 13.02, 0.24 26.03, 0.36 38.64" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(139.7278723342417 79.8970945320903) rotate(0 66.07994842529297 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">at the start</text></g><g transform="translate(135.30420228238947 196.73084870414374) rotate(0 15.979988098144531 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&lt; p</text></g><g transform="translate(267.3843876414536 196.09128881151963) rotate(0 20.949989318847656 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&gt;= p</text></g><g transform="translate(102.36410092920144 238.94531999948038) rotate(0 105.91990661621094 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">before the final swap</text></g><g transform="translate(35.4417839844763 122.21213845712197) rotate(269.37249618124395 30.26996612548828 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cursor</text></g><g stroke-linecap="round"><g transform="translate(79.53485176308365 112.79859767996606) rotate(0 8.26060685123204 -15.144439766651516)"><path d="M0 0 C2.14 -0.23, 10.1 3.67, 12.85 -1.38 C15.6 -6.42, 15.91 -25.47, 16.52 -30.29 M0 0 C2.14 -0.23, 10.1 3.67, 12.85 -1.38 C15.6 -6.42, 15.91 -25.47, 16.52 -30.29" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(79.53485176308365 112.79859767996606) rotate(0 8.26060685123204 -15.144439766651516)"><path d="M20.49 -16.27 C18.95 -21.73, 17.4 -27.19, 16.52 -30.29 M20.49 -16.27 C19.16 -20.99, 17.82 -25.7, 16.52 -30.29" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(79.53485176308365 112.79859767996606) rotate(0 8.26060685123204 -15.144439766651516)"><path d="M10.55 -17 C12.88 -22.17, 15.2 -27.35, 16.52 -30.29 M10.55 -17 C12.56 -21.47, 14.57 -25.94, 16.52 -30.29" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(80.91165020799176 158.69089881308122) rotate(0 72.05080984078927 13.538199423354229)"><path d="M0 0 C22.33 0.54, 109.99 -1.3, 134.01 3.21 C158.02 7.73, 142.42 23.1, 144.1 27.08 M0 0 C22.33 0.54, 109.99 -1.3, 134.01 3.21 C158.02 7.73, 142.42 23.1, 144.1 27.08" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(80.91165020799176 158.69089881308122) rotate(0 72.05080984078927 13.538199423354229)"><path d="M142.96 14.17 C143.41 19.29, 143.87 24.4, 144.1 27.08 M142.96 14.17 C143.39 18.99, 143.81 23.82, 144.1 27.08" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(80.91165020799176 158.69089881308122) rotate(0 72.05080984078927 13.538199423354229)"><path d="M151.52 16.46 C148.58 20.67, 145.64 24.88, 144.1 27.08 M151.52 16.46 C148.75 20.43, 145.98 24.4, 144.1 27.08" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(66.68502705308785 10) rotate(0 27.80998992919922 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">0 1 ...</text></g><g stroke-linecap="round" transform="translate(91.08079394419886 41.48954473204225) rotate(0 130.81191690137226 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C0.9 5.06, 2.06 3.73, 4.99 0.36 M-0.26 6.4 C1.37 4.52, 3 2.64, 4.99 0.36 M0.13 12.04 C3.13 8.59, 6.13 5.14, 10.63 -0.03 M0.13 12.04 C2.94 8.81, 5.75 5.58, 10.63 -0.03 M-0.13 18.44 C5.73 11.69, 11.6 4.95, 15.62 0.33 M-0.13 18.44 C5.97 11.43, 12.06 4.42, 15.62 0.33 M0.27 24.08 C4.99 18.64, 9.72 13.21, 21.26 -0.07 M0.27 24.08 C6.23 17.22, 12.19 10.36, 21.26 -0.07 M0 30.48 C5.35 24.34, 10.69 18.19, 26.25 0.29 M0 30.48 C9.99 18.99, 19.98 7.5, 26.25 0.29 M4.34 31.59 C11.52 23.33, 18.71 15.06, 31.89 -0.1 M4.34 31.59 C12.01 22.77, 19.68 13.94, 31.89 -0.1 M9.98 31.2 C15.96 24.32, 21.94 17.43, 36.88 0.26 M9.98 31.2 C16.18 24.07, 22.38 16.93, 36.88 0.26 M14.97 31.56 C24.99 20.03, 35.01 8.51, 42.52 -0.14 M14.97 31.56 C23.6 21.62, 32.24 11.69, 42.52 -0.14 M20.61 31.17 C28.36 22.25, 36.11 13.33, 47.51 0.22 M20.61 31.17 C28.65 21.92, 36.69 12.67, 47.51 0.22 M25.6 31.53 C34.03 21.82, 42.46 12.12, 53.15 -0.17 M25.6 31.53 C31.81 24.37, 38.03 17.22, 53.15 -0.17 M31.24 31.13 C39.62 21.49, 48.01 11.84, 58.14 0.19 M31.24 31.13 C38.54 22.73, 45.84 14.33, 58.14 0.19 M36.23 31.49 C46.2 20.01, 56.18 8.53, 63.78 -0.21 M36.23 31.49 C45.18 21.19, 54.14 10.89, 63.78 -0.21 M41.21 31.85 C51 20.59, 60.79 9.34, 68.77 0.15 M41.21 31.85 C48.31 23.69, 55.4 15.53, 68.77 0.15 M46.86 31.46 C52.57 24.88, 58.29 18.31, 74.41 -0.24 M46.86 31.46 C54.98 22.11, 63.1 12.76, 74.41 -0.24 M51.84 31.82 C61.01 21.28, 70.17 10.74, 79.4 0.12 M51.84 31.82 C59.82 22.64, 67.79 13.47, 79.4 0.12 M57.49 31.42 C63.52 24.48, 69.56 17.53, 85.04 -0.28 M57.49 31.42 C65.53 22.17, 73.58 12.91, 85.04 -0.28 M62.47 31.78 C70.99 21.98, 79.51 12.18, 90.03 0.08 M62.47 31.78 C68.63 24.7, 74.79 17.62, 90.03 0.08 M68.12 31.39 C78.48 19.47, 88.84 7.55, 95.67 -0.31 M68.12 31.39 C74.92 23.57, 81.71 15.74, 95.67 -0.31 M73.1 31.75 C78.68 25.34, 84.25 18.92, 100.66 0.05 M73.1 31.75 C79.69 24.17, 86.27 16.6, 100.66 0.05 M78.75 31.35 C88.62 19.99, 98.5 8.63, 106.3 -0.34 M78.75 31.35 C88.74 19.85, 98.74 8.36, 106.3 -0.34 M83.73 31.71 C91.46 22.83, 99.18 13.94, 111.29 0.02 M83.73 31.71 C93.07 20.97, 102.4 10.24, 111.29 0.02 M89.38 31.32 C96.05 23.64, 102.72 15.97, 116.27 0.38 M89.38 31.32 C95.22 24.6, 101.06 17.88, 116.27 0.38 M94.36 31.68 C101.62 23.33, 108.88 14.98, 121.92 -0.02 M94.36 31.68 C101.23 23.77, 108.11 15.87, 121.92 -0.02 M100.01 31.28 C106.15 24.22, 112.3 17.15, 126.91 0.34 M100.01 31.28 C107.01 23.23, 114.02 15.17, 126.91 0.34 M104.99 31.64 C111.15 24.57, 117.3 17.49, 132.55 -0.05 M104.99 31.64 C113.82 21.49, 122.65 11.33, 132.55 -0.05 M110.64 31.25 C118.29 22.44, 125.95 13.64, 137.54 0.31 M110.64 31.25 C119.15 21.45, 127.67 11.65, 137.54 0.31 M115.62 31.61 C123.43 22.63, 131.23 13.65, 143.18 -0.09 M115.62 31.61 C121.83 24.47, 128.04 17.33, 143.18 -0.09 M121.27 31.21 C129.42 21.84, 137.57 12.46, 148.17 0.27 M121.27 31.21 C128.89 22.45, 136.51 13.68, 148.17 0.27 M126.25 31.57 C135.02 21.49, 143.78 11.41, 153.81 -0.12 M126.25 31.57 C133.43 23.32, 140.61 15.06, 153.81 -0.12 M131.9 31.18 C141.9 19.68, 151.9 8.17, 158.8 0.24 M131.9 31.18 C138.12 24.03, 144.33 16.87, 158.8 0.24 M136.88 31.54 C143.89 23.48, 150.89 15.43, 164.44 -0.16 M136.88 31.54 C143.67 23.74, 150.45 15.93, 164.44 -0.16 M142.53 31.15 C150.07 22.46, 157.62 13.78, 169.43 0.2 M142.53 31.15 C150.72 21.72, 158.91 12.29, 169.43 0.2 M147.51 31.51 C157.7 19.79, 167.88 8.08, 175.07 -0.19 M147.51 31.51 C153.74 24.35, 159.96 17.19, 175.07 -0.19 M153.16 31.11 C159.09 24.28, 165.03 17.45, 180.06 0.17 M153.16 31.11 C159.11 24.26, 165.07 17.41, 180.06 0.17 M158.14 31.47 C168.99 19, 179.84 6.52, 185.7 -0.23 M158.14 31.47 C168.24 19.85, 178.34 8.24, 185.7 -0.23 M163.13 31.83 C170.98 22.8, 178.84 13.76, 190.69 0.13 M163.13 31.83 C173.4 20.02, 183.67 8.21, 190.69 0.13 M168.77 31.44 C174.49 24.86, 180.21 18.28, 196.33 -0.26 M168.77 31.44 C175.9 23.24, 183.02 15.04, 196.33 -0.26 M173.76 31.8 C183.89 20.14, 194.02 8.49, 201.32 0.1 M173.76 31.8 C182.66 21.56, 191.56 11.32, 201.32 0.1 M179.4 31.4 C188.88 20.5, 198.36 9.6, 206.96 -0.3 M179.4 31.4 C185.35 24.56, 191.3 17.72, 206.96 -0.3 M184.39 31.76 C191.69 23.37, 198.98 14.98, 211.95 0.06 M184.39 31.76 C192.95 21.92, 201.5 12.08, 211.95 0.06 M190.03 31.37 C197.94 22.27, 205.85 13.18, 217.59 -0.33 M190.03 31.37 C200.38 19.46, 210.73 7.56, 217.59 -0.33 M195.02 31.73 C205.32 19.88, 215.61 8.04, 222.58 0.03 M195.02 31.73 C204.58 20.74, 214.13 9.75, 222.58 0.03 M200.66 31.33 C210.93 19.53, 221.19 7.72, 228.22 -0.36 M200.66 31.33 C211.65 18.7, 222.63 6.06, 228.22 -0.36 M205.65 31.69 C216.49 19.22, 227.33 6.75, 233.21 0 M205.65 31.69 C214.38 21.66, 223.1 11.62, 233.21 0 M211.29 31.3 C219.03 22.4, 226.77 13.5, 238.19 0.36 M211.29 31.3 C221.22 19.88, 231.14 8.47, 238.19 0.36 M216.28 31.66 C222.48 24.53, 228.67 17.41, 243.84 -0.04 M216.28 31.66 C223.95 22.83, 231.63 14.01, 243.84 -0.04 M221.92 31.26 C231.92 19.77, 241.91 8.27, 248.82 0.32 M221.92 31.26 C229.84 22.16, 237.76 13.05, 248.82 0.32 M226.91 31.62 C234.35 23.07, 241.78 14.52, 254.47 -0.07 M226.91 31.62 C236.94 20.08, 246.98 8.54, 254.47 -0.07 M232.55 31.23 C241.02 21.5, 249.48 11.76, 259.45 0.29 M232.55 31.23 C238.09 24.87, 243.62 18.51, 259.45 0.29 M237.54 31.59 C245.61 22.31, 253.67 13.03, 261.82 3.67 M237.54 31.59 C244.31 23.81, 251.08 16.02, 261.82 3.67 M243.18 31.2 C248.11 25.53, 253.03 19.87, 262.21 9.31 M243.18 31.2 C248.08 25.56, 252.98 19.93, 262.21 9.31 M248.17 31.56 C252.55 26.52, 256.92 21.49, 261.95 15.71 M248.17 31.56 C250.94 28.37, 253.72 25.18, 261.95 15.71 M253.81 31.16 C256.35 28.24, 258.89 25.32, 262.34 21.35 M253.81 31.16 C255.76 28.93, 257.7 26.7, 262.34 21.35 M258.8 31.52 C259.89 30.27, 260.98 29.01, 262.08 27.75 M258.8 31.52 C259.73 30.45, 260.66 29.38, 262.08 27.75" stroke="#ffec99" stroke-width="0.5" fill="none"></path><path d="M0 0 C67.6 0, 135.2 0, 261.62 0 M0 0 C92.65 0, 185.3 0, 261.62 0 M261.62 0 C261.62 8.9, 261.62 17.8, 261.62 31.08 M261.62 0 C261.62 8.47, 261.62 16.93, 261.62 31.08 M261.62 31.08 C204.26 31.08, 146.89 31.08, 0 31.08 M261.62 31.08 C161.71 31.08, 61.79 31.08, 0 31.08 M0 31.08 C0 21.94, 0 12.8, 0 0 M0 31.08 C0 20.62, 0 10.16, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(189.7104359287138 325.1663713801434) rotate(0 11.453109372621725 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.71 4.13, 3.68 1.86, 4.99 0.36 M-0.26 6.4 C1.6 4.25, 3.47 2.1, 4.99 0.36 M0.13 12.04 C3.48 8.19, 6.83 4.34, 10.63 -0.03 M0.13 12.04 C3.38 8.31, 6.62 4.58, 10.63 -0.03 M-0.13 18.44 C6.07 11.31, 12.26 4.19, 15.62 0.33 M-0.13 18.44 C4.97 12.57, 10.07 6.71, 15.62 0.33 M0.27 24.08 C5.22 18.39, 10.17 12.69, 21.26 -0.07 M0.27 24.08 C8.26 14.89, 16.25 5.69, 21.26 -0.07 M0 30.48 C5.44 24.22, 10.88 17.97, 23.62 3.31 M0 30.48 C5.6 24.04, 11.2 17.6, 23.62 3.31 M4.34 31.59 C9.77 25.34, 15.21 19.09, 23.36 9.71 M4.34 31.59 C11.9 22.89, 19.47 14.18, 23.36 9.71 M9.98 31.2 C14.31 26.22, 18.64 21.24, 23.76 15.35 M9.98 31.2 C15.33 25.04, 20.69 18.88, 23.76 15.35 M14.97 31.56 C16.76 29.5, 18.55 27.44, 23.49 21.75 M14.97 31.56 C17.76 28.35, 20.55 25.13, 23.49 21.75 M20.61 31.17 C21.46 30.18, 22.32 29.2, 23.23 28.15 M20.61 31.17 C21.65 29.97, 22.69 28.77, 23.23 28.15" stroke="#a5d8ff" stroke-width="0.5" fill="none"></path><path d="M0 0 C8.65 0, 17.31 0, 22.91 0 M0 0 C6.59 0, 13.18 0, 22.91 0 M22.91 0 C22.91 10.7, 22.91 21.4, 22.91 31.08 M22.91 0 C22.91 9.24, 22.91 18.47, 22.91 31.08 M22.91 31.08 C17.7 31.08, 12.49 31.08, 0 31.08 M22.91 31.08 C16.11 31.08, 9.32 31.08, 0 31.08 M0 31.08 C0 21.73, 0 12.37, 0 0 M0 31.08 C0 22.93, 0 14.78, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(56.926663036172016 325.9385565636466) rotate(0 62.83756858550689 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.4 4.48, 3.07 2.57, 4.99 0.36 M-0.26 6.4 C1.64 4.21, 3.54 2.03, 4.99 0.36 M0.13 12.04 C3.59 8.07, 7.04 4.1, 10.63 -0.03 M0.13 12.04 C2.55 9.26, 4.97 6.48, 10.63 -0.03 M-0.13 18.44 C4.69 12.9, 9.51 7.35, 15.62 0.33 M-0.13 18.44 C5.01 12.53, 10.15 6.61, 15.62 0.33 M0.27 24.08 C7.02 16.31, 13.78 8.53, 21.26 -0.07 M0.27 24.08 C7.26 16.04, 14.25 8, 21.26 -0.07 M0 30.48 C7.72 21.6, 15.44 12.72, 26.25 0.29 M0 30.48 C6.89 22.56, 13.78 14.64, 26.25 0.29 M4.34 31.59 C11.56 23.29, 18.78 14.98, 31.89 -0.1 M4.34 31.59 C13.4 21.17, 22.47 10.74, 31.89 -0.1 M9.98 31.2 C19.8 19.9, 29.63 8.59, 36.88 0.26 M9.98 31.2 C18.59 21.29, 27.2 11.39, 36.88 0.26 M14.97 31.56 C23.82 21.37, 32.67 11.19, 42.52 -0.14 M14.97 31.56 C22.36 23.05, 29.76 14.55, 42.52 -0.14 M20.61 31.17 C26.1 24.84, 31.6 18.52, 47.51 0.22 M20.61 31.17 C26.62 24.25, 32.63 17.33, 47.51 0.22 M25.6 31.53 C34.49 21.3, 43.38 11.06, 53.15 -0.17 M25.6 31.53 C34.53 21.25, 43.47 10.97, 53.15 -0.17 M31.24 31.13 C41.94 18.82, 52.64 6.51, 58.14 0.19 M31.24 31.13 C41.2 19.68, 51.15 8.22, 58.14 0.19 M36.23 31.49 C42.87 23.84, 49.52 16.2, 63.78 -0.21 M36.23 31.49 C44.31 22.19, 52.4 12.89, 63.78 -0.21 M41.21 31.85 C50.41 21.27, 59.61 10.69, 68.77 0.15 M41.21 31.85 C50.33 21.36, 59.45 10.88, 68.77 0.15 M46.86 31.46 C55.21 21.85, 63.57 12.23, 74.41 -0.24 M46.86 31.46 C55.01 22.08, 63.16 12.7, 74.41 -0.24 M51.84 31.82 C60.17 22.24, 68.49 12.66, 79.4 0.12 M51.84 31.82 C61.49 20.72, 71.13 9.63, 79.4 0.12 M57.49 31.42 C65.38 22.34, 73.28 13.25, 85.04 -0.28 M57.49 31.42 C65.07 22.7, 72.64 13.98, 85.04 -0.28 M62.47 31.78 C73.33 19.3, 84.18 6.81, 90.03 0.08 M62.47 31.78 C69.23 24.01, 75.98 16.24, 90.03 0.08 M68.12 31.39 C74.2 24.39, 80.29 17.38, 95.67 -0.31 M68.12 31.39 C76.33 21.94, 84.54 12.49, 95.67 -0.31 M73.1 31.75 C78.67 25.35, 84.23 18.94, 100.66 0.05 M73.1 31.75 C81.58 22, 90.06 12.25, 100.66 0.05 M78.75 31.35 C86.66 22.25, 94.57 13.14, 106.3 -0.34 M78.75 31.35 C85.78 23.26, 92.81 15.17, 106.3 -0.34 M83.73 31.71 C92.57 21.55, 101.4 11.39, 111.29 0.02 M83.73 31.71 C89.3 25.31, 94.87 18.9, 111.29 0.02 M89.38 31.32 C97.94 21.47, 106.49 11.63, 116.27 0.38 M89.38 31.32 C99.07 20.16, 108.77 9.01, 116.27 0.38 M94.36 31.68 C101.14 23.88, 107.92 16.09, 121.92 -0.02 M94.36 31.68 C101.71 23.23, 109.05 14.78, 121.92 -0.02 M100.01 31.28 C107.63 22.51, 115.26 13.74, 125.59 1.85 M100.01 31.28 C106.43 23.89, 112.85 16.5, 125.59 1.85 M104.99 31.64 C110.77 25, 116.55 18.35, 125.99 7.49 M104.99 31.64 C109.45 26.51, 113.91 21.38, 125.99 7.49 M110.64 31.25 C114.6 26.69, 118.56 22.14, 125.73 13.89 M110.64 31.25 C114.98 26.26, 119.32 21.26, 125.73 13.89 M115.62 31.61 C117.67 29.26, 119.71 26.91, 125.46 20.29 M115.62 31.61 C117.84 29.07, 120.05 26.52, 125.46 20.29 M121.27 31.21 C123.1 29.11, 124.93 27, 125.86 25.93 M121.27 31.21 C122.44 29.87, 123.6 28.53, 125.86 25.93" stroke="#ffc9c9" stroke-width="0.5" fill="none"></path><path d="M0 0 C49.04 0, 98.08 0, 125.68 0 M0 0 C42.46 0, 84.92 0, 125.68 0 M125.68 0 C125.68 6.61, 125.68 13.22, 125.68 31.08 M125.68 0 C125.68 6.55, 125.68 13.1, 125.68 31.08 M125.68 31.08 C80.94 31.08, 36.21 31.08, 0 31.08 M125.68 31.08 C84.95 31.08, 44.22 31.08, 0 31.08 M0 31.08 C0 20.32, 0 9.55, 0 0 M0 31.08 C0 22.04, 0 12.99, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(220.20782439382603 325.6607113599213) rotate(0 65.04773054076469 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.26 4.65, 2.78 2.9, 4.99 0.36 M-0.26 6.4 C1.62 4.23, 3.5 2.07, 4.99 0.36 M0.13 12.04 C3.44 8.24, 6.74 4.44, 10.63 -0.03 M0.13 12.04 C3.57 8.09, 7 4.14, 10.63 -0.03 M-0.13 18.44 C4.21 13.45, 8.54 8.46, 15.62 0.33 M-0.13 18.44 C3.82 13.89, 7.78 9.34, 15.62 0.33 M0.27 24.08 C6.77 16.6, 13.27 9.12, 21.26 -0.07 M0.27 24.08 C5.26 18.33, 10.26 12.58, 21.26 -0.07 M0 30.48 C10.43 18.49, 20.85 6.5, 26.25 0.29 M0 30.48 C9.93 19.06, 19.85 7.65, 26.25 0.29 M4.34 31.59 C13.58 20.97, 22.81 10.34, 31.89 -0.1 M4.34 31.59 C13.04 21.58, 21.74 11.57, 31.89 -0.1 M9.98 31.2 C15.87 24.42, 21.77 17.64, 36.88 0.26 M9.98 31.2 C18.65 21.23, 27.31 11.26, 36.88 0.26 M14.97 31.56 C20.99 24.63, 27.02 17.7, 42.52 -0.14 M14.97 31.56 C22.32 23.1, 29.68 14.64, 42.52 -0.14 M20.61 31.17 C27.52 23.21, 34.43 15.26, 47.51 0.22 M20.61 31.17 C28.4 22.21, 36.18 13.25, 47.51 0.22 M25.6 31.53 C36.3 19.21, 47.01 6.89, 53.15 -0.17 M25.6 31.53 C35.84 19.74, 46.08 7.96, 53.15 -0.17 M31.24 31.13 C38.71 22.54, 46.17 13.95, 58.14 0.19 M31.24 31.13 C36.87 24.65, 42.5 18.18, 58.14 0.19 M36.23 31.49 C46.57 19.59, 56.92 7.69, 63.78 -0.21 M36.23 31.49 C46.8 19.32, 57.38 7.16, 63.78 -0.21 M41.21 31.85 C52.22 19.19, 63.23 6.52, 68.77 0.15 M41.21 31.85 C47.68 24.42, 54.14 16.98, 68.77 0.15 M46.86 31.46 C55.42 21.6, 63.99 11.74, 74.41 -0.24 M46.86 31.46 C53.2 24.15, 59.55 16.85, 74.41 -0.24 M51.84 31.82 C62.67 19.36, 73.5 6.91, 79.4 0.12 M51.84 31.82 C58.5 24.16, 65.16 16.5, 79.4 0.12 M57.49 31.42 C63.79 24.18, 70.09 16.93, 85.04 -0.28 M57.49 31.42 C66.08 21.53, 74.68 11.64, 85.04 -0.28 M62.47 31.78 C72.93 19.75, 83.39 7.72, 90.03 0.08 M62.47 31.78 C71.58 21.31, 80.68 10.84, 90.03 0.08 M68.12 31.39 C78.13 19.87, 88.14 8.35, 95.67 -0.31 M68.12 31.39 C73.7 24.96, 79.29 18.54, 95.67 -0.31 M73.1 31.75 C82.27 21.2, 91.43 10.66, 100.66 0.05 M73.1 31.75 C82.03 21.48, 90.95 11.21, 100.66 0.05 M78.75 31.35 C85.69 23.37, 92.63 15.38, 106.3 -0.34 M78.75 31.35 C88.39 20.26, 98.03 9.17, 106.3 -0.34 M83.73 31.71 C94.12 19.76, 104.51 7.82, 111.29 0.02 M83.73 31.71 C91.14 23.19, 98.55 14.66, 111.29 0.02 M89.38 31.32 C95.62 24.13, 101.87 16.95, 116.27 0.38 M89.38 31.32 C99.44 19.74, 109.51 8.15, 116.27 0.38 M94.36 31.68 C102.33 22.52, 110.29 13.36, 121.92 -0.02 M94.36 31.68 C103.61 21.04, 112.85 10.41, 121.92 -0.02 M100.01 31.28 C109.26 20.64, 118.51 10, 126.91 0.34 M100.01 31.28 C109.97 19.82, 119.94 8.36, 126.91 0.34 M104.99 31.64 C115.14 19.97, 125.29 8.29, 130.58 2.21 M104.99 31.64 C113.11 22.31, 121.23 12.97, 130.58 2.21 M110.64 31.25 C115.28 25.91, 119.93 20.56, 130.97 7.85 M110.64 31.25 C114.83 26.43, 119.01 21.61, 130.97 7.85 M115.62 31.61 C119.84 26.76, 124.06 21.91, 130.71 14.25 M115.62 31.61 C120.62 25.86, 125.61 20.12, 130.71 14.25 M121.27 31.21 C123.36 28.8, 125.46 26.39, 130.45 20.65 M121.27 31.21 C123.31 28.87, 125.35 26.52, 130.45 20.65 M126.25 31.57 C127.49 30.16, 128.72 28.74, 130.85 26.29 M126.25 31.57 C127.71 29.9, 129.17 28.22, 130.85 26.29" stroke="#b2f2bb" stroke-width="0.5" fill="none"></path><path d="M0 0 C47.61 0, 95.21 0, 130.1 0 M0 0 C29.5 0, 59 0, 130.1 0 M130.1 0 C130.1 7.17, 130.1 14.35, 130.1 31.08 M130.1 0 C130.1 8.2, 130.1 16.39, 130.1 31.08 M130.1 31.08 C88.95 31.08, 47.81 31.08, 0 31.08 M130.1 31.08 C98.28 31.08, 66.47 31.08, 0 31.08 M0 31.08 C0 20.86, 0 10.64, 0 0 M0 31.08 C0 23.58, 0 16.08, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(53.3070039874265 321.7817697197526) rotate(0 151.14284515380862 19.428573608398438)"><path d="M9.71 0 C73.61 0, 137.51 0, 292.57 0 M9.71 0 C89.68 0, 169.65 0, 292.57 0 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M302.29 9.71 C302.29 14.13, 302.29 18.55, 302.29 29.14 M302.29 9.71 C302.29 15.48, 302.29 21.24, 302.29 29.14 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M292.57 38.86 C220.84 38.86, 149.1 38.86, 9.71 38.86 M292.57 38.86 C208.62 38.86, 124.67 38.86, 9.71 38.86 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M0 29.14 C0 22.98, 0 16.81, 0 9.71 M0 29.14 C0 22.12, 0 15.09, 0 9.71 M0 9.71 C0 3.24, 3.24 0, 9.71 0 M0 9.71 C0 3.24, 3.24 0, 9.71 0" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(197.19700245659143 325.136024101552) rotate(0 4.92999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">p</text></g><g stroke-linecap="round"><g transform="translate(188.96560939875545 322.0618855476043) rotate(0 -0.13637754938025637 18.955048295372933)"><path d="M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91 M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(215.6128402793506 321.9996056217005) rotate(0 0.18064510034000136 19.317736083193836)"><path d="M0 0 C0.11 11.39, 0.21 22.77, 0.36 38.64 M0 0 C0.11 12.13, 0.23 24.26, 0.36 38.64" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(92.52500178295824 331.9571148764832) rotate(0 15.979988098144531 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&lt; p</text></g><g transform="translate(265.3813796783862 327.8224972089793) rotate(0 20.949989318847656 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&gt;= p</text></g><g transform="translate(100.36109296613401 370.67652839694) rotate(0 102.14991760253906 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">after the final swap</text></g><g transform="translate(-23.673204296843977 303.33067386070576) rotate(268.8815892622579 47.08995819091797 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cursor - 1</text></g><g stroke-linecap="round"><g transform="translate(36.03483635964025 287.3114309208897) rotate(0 82.28051692419993 14.999830348965645)"><path d="M0 0 C25.29 0.29, 124.32 -3.25, 151.75 1.75 C179.17 6.75, 162.43 25.29, 164.56 30 M0 0 C25.29 0.29, 124.32 -3.25, 151.75 1.75 C179.17 6.75, 162.43 25.29, 164.56 30" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(36.03483635964025 287.3114309208897) rotate(0 82.28051692419993 14.999830348965645)"><path d="M162.27 14.66 C163.05 19.87, 163.83 25.09, 164.56 30 M162.27 14.66 C163 19.56, 163.73 24.46, 164.56 30" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(36.03483635964025 287.3114309208897) rotate(0 82.28051692419993 14.999830348965645)"><path d="M172.67 16.78 C169.91 21.27, 167.16 25.77, 164.56 30 M172.67 16.78 C170.08 21, 167.49 25.23, 164.56 30" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask></svg>

We start the `cursor` at index `1`, moving all the elements \\(\lt\\) `pivot` in the first partition. <br> <br> At the end of the loop, `cursor` will be left pointing at the start of second partition, which contains elements \\(\ge\\) `pivot`. <br> <br> So we take a step back (`cursor--`) and move the pivot at the end of the first partition.

</div>

## Three-way partition

=== "pseudocode"

    ```ruby linenums="1"
    parition(nums, pivot):
      l = 0, c = 0, r = nums.length - 1
      
      while c <= r:
        switch(nums[c]):
          < pivot -> swap(l++, c++)
          = pivot -> c++
          > pivot -> swap(c, r--)
      
      return (l, c)
    ```

=== "kotlin"

    ```kotlin linenums="1"
	fun MutableList<Int>.partitionThreeWay(pivot: Int = this[0]): Pair<Int, Int> {
	  var l = 0; var c = 0; var r = size - 1
	  while (c <= r)
	    when {
	      this[c]  < pivot -> swap(l++, c++)
	      this[c] == pivot -> c++
	      this[c]  > pivot -> swap(c, r--)
	    }
	  return Pair(l, c)
	}

	fun <T> MutableList<T>.swap(i: Int, j: Int) {
	  val t = this[i]
	  this[i] = this[j]
	  this[j] = t
	}
    ```

=== "tests"

    ```kotlin linenums="1"
	import org.junit.jupiter.api.Assertions.*
	import org.junit.jupiter.api.Test
	import java.util.concurrent.ThreadLocalRandom
	import kotlin.streams.toList

	class PartitionTest {

	  @Test
	  fun threeWaySimplest() {
	    var list = mutableListOf(1, 2, 3)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(1, 3, 2)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(2, 1, 3)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(2, 3, 1)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(3, 1, 2)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)

	    list = mutableListOf(3, 2, 1)
	    list.partitionThreeWay(2)
	    assertEquals(listOf(1, 2, 3), list)
	  }

	  @Test
	  fun fuzzyThreeWay() {
	    val list = ThreadLocalRandom.current().ints(100, 1, 4).toList().toMutableList()
	    val countOne = list.count { it == 1 }
	    val countTwo = list.count { it == 2 }
	    val countThree = list.count { it == 3 }
	    assertEquals(100, countOne + countTwo + countThree)

	    list.partitionThreeWay(2)

	    for (i in 0..<countOne)
	      assertEquals(1, list[i])
	    for (i in countOne..<countOne+countTwo)
	      assertEquals(2, list[i])
	    for (i in countOne+countTwo..<countOne+countTwo+countThree)
	      assertEquals(3, list[i])
	  }
	}
    ```

<div class="grid" markdown>

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 322.28569030761724 103.42580024722605" width="100%">
  <g stroke-linecap="round" transform="translate(128.39876225330846 58.51591423432927) rotate(0 28.89515707780845 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.71 4.13, 3.68 1.86, 4.99 0.36 M-0.26 6.4 C1.6 4.25, 3.47 2.1, 4.99 0.36 M0.13 12.04 C3.48 8.19, 6.83 4.34, 10.63 -0.03 M0.13 12.04 C3.38 8.31, 6.62 4.58, 10.63 -0.03 M-0.13 18.44 C6.07 11.31, 12.26 4.19, 15.62 0.33 M-0.13 18.44 C4.97 12.57, 10.07 6.71, 15.62 0.33 M0.27 24.08 C5.22 18.39, 10.17 12.69, 21.26 -0.07 M0.27 24.08 C8.26 14.89, 16.25 5.69, 21.26 -0.07 M0 30.48 C6.05 23.53, 12.09 16.58, 26.25 0.29 M0 30.48 C6.22 23.33, 12.44 16.17, 26.25 0.29 M4.34 31.59 C12.21 22.54, 20.08 13.48, 31.89 -0.1 M4.34 31.59 C15.3 18.99, 26.26 6.38, 31.89 -0.1 M9.98 31.2 C18.43 21.47, 26.89 11.74, 36.88 0.26 M9.98 31.2 C20.44 19.17, 30.89 7.14, 36.88 0.26 M14.97 31.56 C20.75 24.91, 26.53 18.26, 42.52 -0.14 M14.97 31.56 C23.99 21.17, 33.02 10.79, 42.52 -0.14 M20.61 31.17 C29.36 21.1, 38.1 11.04, 47.51 0.22 M20.61 31.17 C31.26 18.91, 41.91 6.66, 47.51 0.22 M25.6 31.53 C32.51 23.57, 39.43 15.61, 53.15 -0.17 M25.6 31.53 C31.42 24.82, 37.25 18.12, 53.15 -0.17 M31.24 31.13 C39.14 22.04, 47.04 12.95, 58.14 0.19 M31.24 31.13 C39.29 21.87, 47.34 12.61, 58.14 0.19 M36.23 31.49 C41.72 25.18, 47.21 18.86, 57.88 6.59 M36.23 31.49 C41.94 24.92, 47.66 18.34, 57.88 6.59 M41.21 31.85 C46.38 25.91, 51.54 19.97, 58.27 12.23 M41.21 31.85 C45.69 26.71, 50.16 21.56, 58.27 12.23 M46.86 31.46 C50.91 26.79, 54.97 22.13, 58.01 18.63 M46.86 31.46 C51.02 26.67, 55.18 21.88, 58.01 18.63 M51.84 31.82 C54.38 28.9, 56.91 25.98, 58.4 24.27 M51.84 31.82 C53.63 29.76, 55.41 27.71, 58.4 24.27 M57.49 31.42 C57.7 31.17, 57.92 30.93, 58.14 30.67 M57.49 31.42 C57.62 31.27, 57.75 31.12, 58.14 30.67" stroke="#a5d8ff" stroke-width="0.5" fill="none"></path><path d="M0 0 C21.83 0, 43.67 0, 57.79 0 M0 0 C16.63 0, 33.26 0, 57.79 0 M57.79 0 C57.79 10.7, 57.79 21.4, 57.79 31.08 M57.79 0 C57.79 9.24, 57.79 18.47, 57.79 31.08 M57.79 31.08 C44.65 31.08, 31.51 31.08, 0 31.08 M57.79 31.08 C40.65 31.08, 23.52 31.08, 0 31.08 M0 31.08 C0 21.73, 0 12.37, 0 0 M0 31.08 C0 22.93, 0 14.78, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(13.619659048745518 58.72543987432317) rotate(0 52.85058705251956 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.4 4.48, 3.07 2.57, 4.99 0.36 M-0.26 6.4 C1.64 4.21, 3.54 2.03, 4.99 0.36 M0.13 12.04 C3.59 8.07, 7.04 4.1, 10.63 -0.03 M0.13 12.04 C2.55 9.26, 4.97 6.48, 10.63 -0.03 M-0.13 18.44 C4.69 12.9, 9.51 7.35, 15.62 0.33 M-0.13 18.44 C5.01 12.53, 10.15 6.61, 15.62 0.33 M0.27 24.08 C7.02 16.31, 13.78 8.53, 21.26 -0.07 M0.27 24.08 C7.26 16.04, 14.25 8, 21.26 -0.07 M0 30.48 C7.72 21.6, 15.44 12.72, 26.25 0.29 M0 30.48 C6.89 22.56, 13.78 14.64, 26.25 0.29 M4.34 31.59 C11.56 23.29, 18.78 14.98, 31.89 -0.1 M4.34 31.59 C13.4 21.17, 22.47 10.74, 31.89 -0.1 M9.98 31.2 C19.8 19.9, 29.63 8.59, 36.88 0.26 M9.98 31.2 C18.59 21.29, 27.2 11.39, 36.88 0.26 M14.97 31.56 C23.82 21.37, 32.67 11.19, 42.52 -0.14 M14.97 31.56 C22.36 23.05, 29.76 14.55, 42.52 -0.14 M20.61 31.17 C26.1 24.84, 31.6 18.52, 47.51 0.22 M20.61 31.17 C26.62 24.25, 32.63 17.33, 47.51 0.22 M25.6 31.53 C34.49 21.3, 43.38 11.06, 53.15 -0.17 M25.6 31.53 C34.53 21.25, 43.47 10.97, 53.15 -0.17 M31.24 31.13 C41.94 18.82, 52.64 6.51, 58.14 0.19 M31.24 31.13 C41.2 19.68, 51.15 8.22, 58.14 0.19 M36.23 31.49 C42.87 23.84, 49.52 16.2, 63.78 -0.21 M36.23 31.49 C44.31 22.19, 52.4 12.89, 63.78 -0.21 M41.21 31.85 C50.41 21.27, 59.61 10.69, 68.77 0.15 M41.21 31.85 C50.33 21.36, 59.45 10.88, 68.77 0.15 M46.86 31.46 C55.21 21.85, 63.57 12.23, 74.41 -0.24 M46.86 31.46 C55.01 22.08, 63.16 12.7, 74.41 -0.24 M51.84 31.82 C60.17 22.24, 68.49 12.66, 79.4 0.12 M51.84 31.82 C61.49 20.72, 71.13 9.63, 79.4 0.12 M57.49 31.42 C65.38 22.34, 73.28 13.25, 85.04 -0.28 M57.49 31.42 C65.07 22.7, 72.64 13.98, 85.04 -0.28 M62.47 31.78 C73.33 19.3, 84.18 6.81, 90.03 0.08 M62.47 31.78 C69.23 24.01, 75.98 16.24, 90.03 0.08 M68.12 31.39 C74.2 24.39, 80.29 17.38, 95.67 -0.31 M68.12 31.39 C76.33 21.94, 84.54 12.49, 95.67 -0.31 M73.1 31.75 C78.67 25.35, 84.23 18.94, 100.66 0.05 M73.1 31.75 C81.58 22, 90.06 12.25, 100.66 0.05 M78.75 31.35 C86.47 22.47, 94.2 13.58, 105.64 0.41 M78.75 31.35 C85.61 23.45, 92.48 15.56, 105.64 0.41 M83.73 31.71 C90.89 23.49, 98.04 15.26, 106.04 6.05 M83.73 31.71 C88.24 26.53, 92.75 21.34, 106.04 6.05 M89.38 31.32 C94.6 25.31, 99.81 19.31, 105.78 12.45 M89.38 31.32 C95.29 24.52, 101.2 17.71, 105.78 12.45 M94.36 31.68 C97.27 28.34, 100.17 25, 106.17 18.09 M94.36 31.68 C97.51 28.06, 100.66 24.44, 106.17 18.09 M100.01 31.28 C101.77 29.26, 103.53 27.24, 105.91 24.49 M100.01 31.28 C101.49 29.58, 102.97 27.87, 105.91 24.49 M104.99 31.64 C105.17 31.44, 105.35 31.23, 105.65 30.89 M104.99 31.64 C105.13 31.48, 105.27 31.32, 105.65 30.89" stroke="#ffc9c9" stroke-width="0.5" fill="none"></path><path d="M0 0 C41.25 0, 82.5 0, 105.7 0 M0 0 C35.71 0, 71.42 0, 105.7 0 M105.7 0 C105.7 6.61, 105.7 13.22, 105.7 31.08 M105.7 0 C105.7 6.55, 105.7 13.1, 105.7 31.08 M105.7 31.08 C68.08 31.08, 30.45 31.08, 0 31.08 M105.7 31.08 C71.45 31.08, 37.19 31.08, 0 31.08 M0 31.08 C0 20.32, 0 9.55, 0 0 M0 31.08 C0 22.04, 0 12.99, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(196.03082420568393 58.44759467059788) rotate(0 55.48272864112249 15.541943471295042)"><path d="M0 0 C0 0, 0 0, 0 0 M0 0 C0 0, 0 0, 0 0 M-0.26 6.4 C1.26 4.65, 2.78 2.9, 4.99 0.36 M-0.26 6.4 C1.62 4.23, 3.5 2.07, 4.99 0.36 M0.13 12.04 C3.44 8.24, 6.74 4.44, 10.63 -0.03 M0.13 12.04 C3.57 8.09, 7 4.14, 10.63 -0.03 M-0.13 18.44 C4.21 13.45, 8.54 8.46, 15.62 0.33 M-0.13 18.44 C3.82 13.89, 7.78 9.34, 15.62 0.33 M0.27 24.08 C6.77 16.6, 13.27 9.12, 21.26 -0.07 M0.27 24.08 C5.26 18.33, 10.26 12.58, 21.26 -0.07 M0 30.48 C10.43 18.49, 20.85 6.5, 26.25 0.29 M0 30.48 C9.93 19.06, 19.85 7.65, 26.25 0.29 M4.34 31.59 C13.58 20.97, 22.81 10.34, 31.89 -0.1 M4.34 31.59 C13.04 21.58, 21.74 11.57, 31.89 -0.1 M9.98 31.2 C15.87 24.42, 21.77 17.64, 36.88 0.26 M9.98 31.2 C18.65 21.23, 27.31 11.26, 36.88 0.26 M14.97 31.56 C20.99 24.63, 27.02 17.7, 42.52 -0.14 M14.97 31.56 C22.32 23.1, 29.68 14.64, 42.52 -0.14 M20.61 31.17 C27.52 23.21, 34.43 15.26, 47.51 0.22 M20.61 31.17 C28.4 22.21, 36.18 13.25, 47.51 0.22 M25.6 31.53 C36.3 19.21, 47.01 6.89, 53.15 -0.17 M25.6 31.53 C35.84 19.74, 46.08 7.96, 53.15 -0.17 M31.24 31.13 C38.71 22.54, 46.17 13.95, 58.14 0.19 M31.24 31.13 C36.87 24.65, 42.5 18.18, 58.14 0.19 M36.23 31.49 C46.57 19.59, 56.92 7.69, 63.78 -0.21 M36.23 31.49 C46.8 19.32, 57.38 7.16, 63.78 -0.21 M41.21 31.85 C52.22 19.19, 63.23 6.52, 68.77 0.15 M41.21 31.85 C47.68 24.42, 54.14 16.98, 68.77 0.15 M46.86 31.46 C55.42 21.6, 63.99 11.74, 74.41 -0.24 M46.86 31.46 C53.2 24.15, 59.55 16.85, 74.41 -0.24 M51.84 31.82 C62.67 19.36, 73.5 6.91, 79.4 0.12 M51.84 31.82 C58.5 24.16, 65.16 16.5, 79.4 0.12 M57.49 31.42 C63.79 24.18, 70.09 16.93, 85.04 -0.28 M57.49 31.42 C66.08 21.53, 74.68 11.64, 85.04 -0.28 M62.47 31.78 C72.93 19.75, 83.39 7.72, 90.03 0.08 M62.47 31.78 C71.58 21.31, 80.68 10.84, 90.03 0.08 M68.12 31.39 C78.13 19.87, 88.14 8.35, 95.67 -0.31 M68.12 31.39 C73.7 24.96, 79.29 18.54, 95.67 -0.31 M73.1 31.75 C82.27 21.2, 91.43 10.66, 100.66 0.05 M73.1 31.75 C82.03 21.48, 90.95 11.21, 100.66 0.05 M78.75 31.35 C85.69 23.37, 92.63 15.38, 106.3 -0.34 M78.75 31.35 C88.39 20.26, 98.03 9.17, 106.3 -0.34 M83.73 31.71 C94.12 19.76, 104.51 7.82, 111.29 0.02 M83.73 31.71 C91.14 23.19, 98.55 14.66, 111.29 0.02 M89.38 31.32 C94.4 25.54, 99.43 19.75, 111.03 6.41 M89.38 31.32 C97.48 22, 105.58 12.67, 111.03 6.41 M94.36 31.68 C99.29 26.01, 104.22 20.34, 111.42 12.06 M94.36 31.68 C100.09 25.09, 105.81 18.51, 111.42 12.06 M100.01 31.28 C103.84 26.87, 107.68 22.46, 111.16 18.45 M100.01 31.28 C104.14 26.53, 108.27 21.78, 111.16 18.45 M104.99 31.64 C107.34 28.95, 109.68 26.26, 110.9 24.85 M104.99 31.64 C106.87 29.49, 108.74 27.33, 110.9 24.85 M110.64 31.25 C110.79 31.08, 110.94 30.9, 111.29 30.49 M110.64 31.25 C110.77 31.09, 110.91 30.94, 111.29 30.49" stroke="#b2f2bb" stroke-width="0.5" fill="none"></path><path d="M0 0 C40.61 0, 81.21 0, 110.97 0 M0 0 C25.16 0, 50.32 0, 110.97 0 M110.97 0 C110.97 7.17, 110.97 14.35, 110.97 31.08 M110.97 0 C110.97 8.2, 110.97 16.39, 110.97 31.08 M110.97 31.08 C75.87 31.08, 40.78 31.08, 0 31.08 M110.97 31.08 C83.83 31.08, 56.69 31.08, 0 31.08 M0 31.08 C0 20.86, 0 10.64, 0 0 M0 31.08 C0 23.58, 0 16.08, 0 0" fill="none"></path></g><g stroke-linecap="round" transform="translate(10 54.568653030429175) rotate(0 151.14284515380862 19.428573608398438)"><path d="M9.71 0 C73.61 0, 137.51 0, 292.57 0 M9.71 0 C89.68 0, 169.65 0, 292.57 0 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M292.57 0 C299.05 0, 302.29 3.24, 302.29 9.71 M302.29 9.71 C302.29 14.13, 302.29 18.55, 302.29 29.14 M302.29 9.71 C302.29 15.48, 302.29 21.24, 302.29 29.14 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M302.29 29.14 C302.29 35.62, 299.05 38.86, 292.57 38.86 M292.57 38.86 C220.84 38.86, 149.1 38.86, 9.71 38.86 M292.57 38.86 C208.62 38.86, 124.67 38.86, 9.71 38.86 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M9.71 38.86 C3.24 38.86, 0 35.62, 0 29.14 M0 29.14 C0 22.98, 0 16.81, 0 9.71 M0 29.14 C0 22.12, 0 15.09, 0 9.71 M0 9.71 C0 3.24, 3.24 0, 9.71 0 M0 9.71 C0 3.24, 3.24 0, 9.71 0" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g><g transform="translate(142.16651496217906 60.19197525125156) rotate(0 16.099990844726562 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">= p</text></g><g stroke-linecap="round"><g transform="translate(124.27805358372859 54.84876885828095) rotate(0 -0.13637754938025637 18.955048295372933)"><path d="M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91 M0 0 C-0.05 6.32, -0.23 31.59, -0.27 37.91" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(190.9594351184142 54.809030754436264) rotate(0 0.27817518871637503 19.02513540040951)"><path d="M0 0 C0.16 11.21, 0.33 22.43, 0.56 38.05 M0 0 C0.17 11.95, 0.35 23.9, 0.56 38.05" stroke="var(--md-code-fg-color)" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(46.40478271156297 61.36816112039884) rotate(0 15.979988098144531 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&lt; p</text></g><g transform="translate(230.79540329962475 60.3280958207618) rotate(0 14.779991149902344 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">&gt; p</text></g><g transform="translate(13.544114041929873 26.492477046953866) rotate(0 6.879997253417969 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">0</text></g><g transform="translate(131.82898437612738 25.977869659552937) rotate(0 2.6299972534179688 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">l</text></g><g transform="translate(198.55435365233552 23.276179223415113) rotate(0 5.019996643066406 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">c</text></g><g stroke-linecap="round"><g transform="translate(124.23932194422252 50.76884789525883) rotate(0 0.09754050603160636 -20.384423947629415)"><path d="M0 0 C0.03 -6.79, 0.16 -33.97, 0.2 -40.77" stroke="var(--md-code-fg-color)" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(191.04949517776828 50.86637798363523) rotate(0 0.1950914297184454 -20.28688344159778)"><path d="M0 0 C0.07 -6.76, 0.33 -33.81, 0.39 -40.57" stroke="var(--md-code-fg-color)" stroke-width="1.5" fill="none" stroke-dasharray="8 9"></path></g></g><mask></mask></svg>

<br>All elements \\(\lt\\) `pivot` are in range \\([0, l)\\), <br>elements \\(=\\) `pivot` are in range \\([l, c)\\), <br> and all elements \\(\gt\\) `pivot` in \\([c, \text{length})\\).

</div>