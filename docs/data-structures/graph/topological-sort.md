# Topological Sort

<style>
.md-logo img {
  content: url('/data-structures/graph/network-light.svg');
}

:root [data-md-color-scheme=slate] .md-logo img  {
  content: url('/data-structures/graph/network-dark.svg');
}

.added {
  background-color: #e2f6d3;
  display: inline-block;
  width: 100%;
}

.box {
  display: inline-block;
  width: 12px;
  height: 12px;
  margin-bottom: -2px;
}
</style>

## About

Topological sort or topological ordering of a directed graph is a linear ordering of its vertices such that for every edge \\((u, v)\\), \\(u\\) comes before \\(v\\) in the ordering.

Such an ordering is only possible if there are no cycles in the graph, i.e. it's a DAG.

## Example

<div class="grid" markdown>

```title="Valid topological sortings"
1 2 3 4 5
1 2 3 5 4
```

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 230.51856231689453 137.85714721679688" width="150">
  <g transform="translate(10 54.64300537109375) rotate(0 2.7099990844726562 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1</text></g><g transform="translate(92.86145782470703 11.2857666015625) rotate(0 7.1199951171875 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2</text></g><g transform="translate(98.71857452392578 102.85714721679688) rotate(0 6.80999755859375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3</text></g><g transform="translate(207.71857452392578 10) rotate(0 6.399993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4</text></g><g transform="translate(207.00428009033203 100.28570556640625) rotate(0 6.17999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5</text></g><g stroke-linecap="round"><g transform="translate(113.42866516113284 21.535655712542223) rotate(0 44.5713653564453 -0.31646207446164)"><path d="M0 0 C14.86 -0.11, 74.29 -0.53, 89.14 -0.63 M0 0 C14.86 -0.11, 74.29 -0.53, 89.14 -0.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(113.42866516113284 21.535655712542223) rotate(0 44.5713653564453 -0.31646207446164)"><path d="M65.71 8.08 C74.2 4.93, 82.69 1.77, 89.14 -0.63 M65.71 8.08 C73.42 5.22, 81.13 2.35, 89.14 -0.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(113.42866516113284 21.535655712542223) rotate(0 44.5713653564453 -0.31646207446164)"><path d="M65.59 -9.02 C74.12 -5.98, 82.66 -2.94, 89.14 -0.63 M65.59 -9.02 C73.34 -6.26, 81.09 -3.5, 89.14 -0.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(116.85719299316406 113.5306159598291) rotate(0 40.28569030761719 -1.0740840587365597)"><path d="M0 0 C13.43 -0.36, 67.14 -1.79, 80.57 -2.15 M0 0 C13.43 -0.36, 67.14 -1.79, 80.57 -2.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(116.85719299316406 113.5306159598291) rotate(0 40.28569030761719 -1.0740840587365597)"><path d="M57.32 7.03 C63.85 4.45, 70.38 1.87, 80.57 -2.15 M57.32 7.03 C66.47 3.41, 75.63 -0.2, 80.57 -2.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(116.85719299316406 113.5306159598291) rotate(0 40.28569030761719 -1.0740840587365597)"><path d="M56.86 -10.07 C63.52 -7.84, 70.18 -5.62, 80.57 -2.15 M56.86 -10.07 C66.19 -6.95, 75.53 -3.83, 80.57 -2.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(20.2857666015625 58.95813037941599) rotate(0 33.42856597900392 -18.16340758765881)"><path d="M0 0 C11.14 -6.05, 55.71 -30.27, 66.86 -36.33 M0 0 C11.14 -6.05, 55.71 -30.27, 66.86 -36.33" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(20.2857666015625 58.95813037941599) rotate(0 33.42856597900392 -18.16340758765881)"><path d="M50.3 -17.6 C54.48 -22.33, 58.67 -27.07, 66.86 -36.33 M50.3 -17.6 C54.26 -22.08, 58.22 -26.56, 66.86 -36.33" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(20.2857666015625 58.95813037941599) rotate(0 33.42856597900392 -18.16340758765881)"><path d="M42.13 -32.62 C48.38 -33.56, 54.63 -34.5, 66.86 -36.33 M42.13 -32.62 C48.05 -33.51, 53.96 -34.39, 66.86 -36.33" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(20.857147216796875 75.47295381730214) rotate(0 35.71428680419922 18.543290805795692)"><path d="M0 0 C11.9 6.18, 59.52 30.91, 71.43 37.09 M0 0 C11.9 6.18, 59.52 30.91, 71.43 37.09" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(20.857147216796875 75.47295381730214) rotate(0 35.71428680419922 18.543290805795692)"><path d="M46.64 33.85 C56.39 35.12, 66.14 36.4, 71.43 37.09 M46.64 33.85 C55.09 34.95, 63.55 36.06, 71.43 37.09" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(20.857147216796875 75.47295381730214) rotate(0 35.71428680419922 18.543290805795692)"><path d="M54.52 18.67 C61.17 25.92, 67.82 33.16, 71.43 37.09 M54.52 18.67 C60.29 24.95, 66.06 31.23, 71.43 37.09" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(100.6706547442327 37.2857666015625) rotate(0 0.48895877800384824 31.821441650390653)"><path d="M0 0 C0.16 10.61, 0.81 53.04, 0.98 63.64 M0 0 C0.16 10.61, 0.81 53.04, 0.98 63.64" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(100.6706547442327 37.2857666015625) rotate(0 0.48895877800384824 31.821441650390653)"><path d="M-7.93 40.28 C-5.49 46.68, -3.05 53.07, 0.98 63.64 M-7.93 40.28 C-5.43 46.84, -2.93 53.39, 0.98 63.64" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(100.6706547442327 37.2857666015625) rotate(0 0.48895877800384824 31.821441650390653)"><path d="M9.17 40.02 C6.93 46.49, 4.68 52.95, 0.98 63.64 M9.17 40.02 C6.87 46.65, 4.57 53.27, 0.98 63.64" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(114.44691233551336 102.12193272348833) rotate(0 46.55072601077917 -33.06826247016741)"><path d="M0 0 C15.52 -11.02, 77.58 -55.11, 93.1 -66.14 M0 0 C15.52 -11.02, 77.58 -55.11, 93.1 -66.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(114.44691233551336 102.12193272348833) rotate(0 46.55072601077917 -33.06826247016741)"><path d="M78.9 -45.56 C84.13 -53.14, 89.36 -60.72, 93.1 -66.14 M78.9 -45.56 C82.17 -50.3, 85.44 -55.04, 93.1 -66.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(114.44691233551336 102.12193272348833) rotate(0 46.55072601077917 -33.06826247016741)"><path d="M69 -59.5 C77.87 -61.95, 86.75 -64.39, 93.1 -66.14 M69 -59.5 C74.55 -61.03, 80.1 -62.56, 93.1 -66.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>

<hr><hr>

```title="Valid topological sortings"
5 6 1 4 2 3
6 5 4 2 3 1
```

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 213.97858428955078 136.57138061523438" width="150">
  <g transform="translate(77.4242935180664 53.35723876953125) rotate(0 2.7099990844726562 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1</text></g><g transform="translate(10 10) rotate(0 6.17999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5</text></g><g transform="translate(16.999969482421875 101.57138061523438) rotate(0 6.399993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6</text></g><g transform="translate(141.99996948242188 10.42852783203125) rotate(0 6.80999755859375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3</text></g><g transform="translate(143 98.99993896484375) rotate(0 6.399993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4</text></g><g stroke-linecap="round"><g transform="translate(28.68720245361328 20.432248236706357) rotate(0 54.082794189453125 0.36779604665616716)"><path d="M0 0 C18.03 0.12, 90.14 0.61, 108.17 0.74 M0 0 C18.03 0.12, 90.14 0.61, 108.17 0.74" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(28.68720245361328 20.432248236706357) rotate(0 54.082794189453125 0.36779604665616716)"><path d="M84.62 9.13 C93.15 6.09, 101.68 3.05, 108.17 0.74 M84.62 9.13 C92.36 6.37, 100.11 3.61, 108.17 0.74" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(28.68720245361328 20.432248236706357) rotate(0 54.082794189453125 0.36779604665616716)"><path d="M84.73 -7.97 C93.22 -4.82, 101.71 -1.66, 108.17 0.74 M84.73 -7.97 C92.44 -5.11, 100.15 -2.24, 108.17 0.74" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(34.318580627441406 112.30219416050033) rotate(0 49.5528564453125 -1.1293781698070973)"><path d="M0 0 C16.52 -0.38, 82.59 -1.88, 99.11 -2.26 M0 0 C16.52 -0.38, 82.59 -1.88, 99.11 -2.26" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(34.318580627441406 112.30219416050033) rotate(0 49.5528564453125 -1.1293781698070973)"><path d="M75.81 6.82 C82.36 4.27, 88.9 1.72, 99.11 -2.26 M75.81 6.82 C84.98 3.25, 94.15 -0.33, 99.11 -2.26" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(34.318580627441406 112.30219416050033) rotate(0 49.5528564453125 -1.1293781698070973)"><path d="M75.42 -10.27 C82.08 -8.02, 88.73 -5.77, 99.11 -2.26 M75.42 -10.27 C84.75 -7.12, 94.07 -3.96, 99.11 -2.26" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(72.55852508544922 65.25602958419341) rotate(0 -22.538460310850837 -13.856112895468897)"><path d="M0 0 C-7.51 -4.62, -37.56 -23.09, -45.08 -27.71 M0 0 C-7.51 -4.62, -37.56 -23.09, -45.08 -27.71" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(72.55852508544922 65.25602958419341) rotate(0 -22.538460310850837 -13.856112895468897)"><path d="M-24.49 -5.02 C-18.3 -3.75, -12.11 -2.48, 0 0 M-24.49 -5.02 C-18.63 -3.82, -12.78 -2.62, 0 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(72.55852508544922 65.25602958419341) rotate(0 -22.538460310850837 -13.856112895468897)"><path d="M-15.53 -19.59 C-11.61 -14.64, -7.68 -9.68, 0 0 M-15.53 -19.59 C-11.82 -14.9, -8.1 -10.22, 0 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(71.98714447021484 68.45533902972295) rotate(0 -18.12571679605432 15.3182188048238)"><path d="M0 0 C-6.04 5.11, -30.21 25.53, -36.25 30.64 M0 0 C-6.04 5.11, -30.21 25.53, -36.25 30.64" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(71.98714447021484 68.45533902972295) rotate(0 -18.12571679605432 15.3182188048238)"><path d="M-11.79 20.59 C-7.15 12.49, -2.52 4.39, 0 0 M-11.79 20.59 C-7.77 13.57, -3.75 6.54, 0 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(71.98714447021484 68.45533902972295) rotate(0 -18.12571679605432 15.3182188048238)"><path d="M-22.27 8.2 C-13.51 4.97, -4.75 1.75, 0 0 M-22.27 8.2 C-14.67 5.4, -7.08 2.6, 0 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(189.73859405517578 53.714263916015625) rotate(0 7.1199951171875 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2</text></g><g stroke-linecap="round"><g transform="translate(164.28144073486328 106.5) rotate(0 14 -14.5714111328125)"><path d="M0 0 C4.67 -4.86, 23.33 -24.29, 28 -29.14 M0 0 C4.67 -4.86, 23.33 -24.29, 28 -29.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(164.28144073486328 106.5) rotate(0 14 -14.5714111328125)"><path d="M19.83 -10.66 C21.86 -15.26, 23.9 -19.86, 28 -29.14 M19.83 -10.66 C22.44 -16.58, 25.06 -22.49, 28 -29.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(164.28144073486328 106.5) rotate(0 14 -14.5714111328125)"><path d="M9.86 -20.24 C14.37 -22.45, 18.89 -24.67, 28 -29.14 M9.86 -20.24 C15.67 -23.09, 21.47 -25.94, 28 -29.14" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(191.70996856689453 53.928558349609375) rotate(0 -17.428573608398438 -9.714263916015625)"><path d="M0 0 C-5.81 -3.24, -29.05 -16.19, -34.86 -19.43 M0 0 C-5.81 -3.24, -29.05 -16.19, -34.86 -19.43" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(191.70996856689453 53.928558349609375) rotate(0 -17.428573608398438 -9.714263916015625)"><path d="M-15.16 -16.26 C-20.14 -17.06, -25.12 -17.86, -34.86 -19.43 M-15.16 -16.26 C-20.37 -17.1, -25.58 -17.94, -34.86 -19.43" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(191.70996856689453 53.928558349609375) rotate(0 -17.428573608398438 -9.714263916015625)"><path d="M-21.8 -4.34 C-25.1 -8.15, -28.4 -11.97, -34.86 -19.43 M-21.8 -4.34 C-25.26 -8.33, -28.71 -12.32, -34.86 -19.43" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>

```title="Valid topological sorting"
10 13 6 7 5 9 14 15 11 12 16 8 4 3 1 2
1 5 6 10 2 7 13 9 14 15 11 12 8 16 4 3
```

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 406.320617885659 353.1903024009223" height="240">
  <g transform="translate(10 15.369098136339346) rotate(0 2.7099990844726562 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1</text></g><g transform="translate(127.97729251722865 14.170937208091061) rotate(0 7.1199951171875 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2</text></g><g transform="translate(253.50816637895366 10.941834464732324) rotate(0 6.80999755859375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">3</text></g><g transform="translate(367.19905843837535 10) rotate(0 6.399993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">4</text></g><g transform="translate(13.094998267336678 114.66999244167556) rotate(0 6.17999267578125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">5</text></g><g transform="translate(131.07229078456544 113.47183151342739) rotate(0 6.399993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">6</text></g><g transform="translate(256.60316464629045 110.2427287700686) rotate(0 5.379997253417969 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">7</text></g><g transform="translate(370.29405670571214 109.30089430533627) rotate(0 7.649993896484375 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">8</text></g><g transform="translate(13.329118059141138 219.0685161641906) rotate(0 6.089996337890625 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">9</text></g><g transform="translate(134.57048029070302 218.68635710028786) rotate(0 9.589996337890625 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">10</text></g><g transform="translate(260.10135415242803 215.45725435692907) rotate(0 5.4199981689453125 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">11</text></g><g transform="translate(373.7922462118497 214.51541989219675) rotate(0 9.829994201660156 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">12</text></g><g transform="translate(16.005500042345375 318.1903024009223) rotate(0 9.519996643066406 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">13</text></g><g transform="translate(137.24686227390737 316.9921414726739) rotate(0 9.109992980957031 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">14</text></g><g transform="translate(264.4097398643232 313.7630387293152) rotate(0 8.889991760253906 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">15</text></g><g transform="translate(378.1006319237449 312.8212042645829) rotate(0 9.109992980957031 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="var(--md-code-fg-color)" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">16</text></g><g stroke-linecap="round"><g transform="translate(17.931008364465356 142.36249650286715) rotate(0 1.3750657947521177 32.64058819366829)"><path d="M0 0 C0.46 10.88, 2.29 54.4, 2.75 65.28 M0 0 C0.46 10.88, 2.29 54.4, 2.75 65.28" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(17.931008364465356 142.36249650286715) rotate(0 1.3750657947521177 32.64058819366829)"><path d="M-6.78 42.17 C-3.68 49.7, -0.57 57.22, 2.75 65.28 M-6.78 42.17 C-3.65 49.77, -0.51 57.38, 2.75 65.28" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(17.931008364465356 142.36249650286715) rotate(0 1.3750657947521177 32.64058819366829)"><path d="M10.3 41.45 C7.84 49.21, 5.38 56.97, 2.75 65.28 M10.3 41.45 C7.82 49.29, 5.33 57.13, 2.75 65.28" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(24.819194718550648 315.35753766454343) rotate(0 -0.47555906832474193 -34.2725919223592)"><path d="M0 0 C-0.16 -11.42, -0.79 -57.12, -0.95 -68.55 M0 0 C-0.16 -11.42, -0.79 -57.12, -0.95 -68.55" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(24.819194718550648 315.35753766454343) rotate(0 -0.47555906832474193 -34.2725919223592)"><path d="M7.92 -45.17 C5.98 -50.29, 4.03 -55.42, -0.95 -68.55 M7.92 -45.17 C4.67 -53.74, 1.42 -62.3, -0.95 -68.55" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(24.819194718550648 315.35753766454343) rotate(0 -0.47555906832474193 -34.2725919223592)"><path d="M-9.17 -44.94 C-7.37 -50.11, -5.57 -55.28, -0.95 -68.55 M-9.17 -44.94 C-6.16 -53.59, -3.15 -62.24, -0.95 -68.55" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(133.47982607949314 242.73228224114627) rotate(0 -45.696789229812225 39.576681861794015)"><path d="M0 0 C-15.23 13.19, -76.16 65.96, -91.39 79.15 M0 0 C-15.23 13.19, -76.16 65.96, -91.39 79.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(133.47982607949314 242.73228224114627) rotate(0 -45.696789229812225 39.576681861794015)"><path d="M-79.23 57.31 C-83.35 64.71, -87.47 72.1, -91.39 79.15 M-79.23 57.31 C-84.09 66.03, -88.94 74.75, -91.39 79.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(133.47982607949314 242.73228224114627) rotate(0 -45.696789229812225 39.576681861794015)"><path d="M-68.04 70.24 C-75.95 73.26, -83.86 76.28, -91.39 79.15 M-68.04 70.24 C-77.36 73.8, -86.69 77.36, -91.39 79.15" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(144.90403895118413 245.18031896265836) rotate(0 1.2240339249939325 33.864622118662226)"><path d="M0 0 C0.41 11.29, 2.04 56.44, 2.45 67.73 M0 0 C0.41 11.29, 2.04 56.44, 2.45 67.73" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(144.90403895118413 245.18031896265836) rotate(0 1.2240339249939325 33.864622118662226)"><path d="M-6.95 44.56 C-4.33 51.01, -1.72 57.45, 2.45 67.73 M-6.95 44.56 C-3.46 53.16, 0.03 61.75, 2.45 67.73" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(144.90403895118413 245.18031896265836) rotate(0 1.2240339249939325 33.864622118662226)"><path d="M10.14 43.94 C8 50.56, 5.86 57.18, 2.45 67.73 M10.14 43.94 C7.29 52.77, 4.43 61.6, 2.45 67.73" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(94.31123853529914 290.8771393209464) rotate(0 17.952290043406094 14.688251457548517)"><path d="M0 0 C5.98 4.9, 29.92 24.48, 35.9 29.38 M0 0 C5.98 4.9, 29.92 24.48, 35.9 29.38" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(94.31123853529914 290.8771393209464) rotate(0 17.952290043406094 14.688251457548517)"><path d="M14.01 21.71 C22.22 24.59, 30.42 27.46, 35.9 29.38 M14.01 21.71 C21.31 24.27, 28.61 26.82, 35.9 29.38" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(94.31123853529914 290.8771393209464) rotate(0 17.952290043406094 14.688251457548517)"><path d="M24.06 9.43 C28.5 16.91, 32.94 24.38, 35.9 29.38 M24.06 9.43 C28.01 16.08, 31.96 22.73, 35.9 29.38" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(30.66203474817769 238.65221066246744) rotate(0 23.256395547078796 19.584379375405405)"><path d="M0 0 C7.75 6.53, 38.76 32.64, 46.51 39.17 M0 0 C7.75 6.53, 38.76 32.64, 46.51 39.17" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(153.88018397288715 122.77817160229444) rotate(0 47.32885521545467 -0.40801649641062454)"><path d="M0 0 C15.78 -0.14, 78.88 -0.68, 94.66 -0.82 M0 0 C15.78 -0.14, 78.88 -0.68, 94.66 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(153.88018397288715 122.77817160229444) rotate(0 47.32885521545467 -0.40801649641062454)"><path d="M71.24 7.94 C79.13 4.99, 87.03 2.04, 94.66 -0.82 M71.24 7.94 C79.03 5.03, 86.81 2.12, 94.66 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(153.88018397288715 122.77817160229444) rotate(0 47.32885521545467 -0.40801649641062454)"><path d="M71.09 -9.16 C79.04 -6.35, 86.98 -3.54, 94.66 -0.82 M71.09 -9.16 C78.93 -6.39, 86.76 -3.61, 94.66 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(137.55989765817196 105.64186785899591) rotate(0 -0.8160018643454805 -31.824562982966)"><path d="M0 0 C-0.27 -10.61, -1.36 -53.04, -1.63 -63.65 M0 0 C-0.27 -10.61, -1.36 -53.04, -1.63 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(137.55989765817196 105.64186785899591) rotate(0 -0.8160018643454805 -31.824562982966)"><path d="M7.52 -40.38 C4.35 -48.43, 1.19 -56.48, -1.63 -63.65 M7.52 -40.38 C5.47 -45.6, 3.42 -50.81, -1.63 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(137.55989765817196 105.64186785899591) rotate(0 -0.8160018643454805 -31.824562982966)"><path d="M-9.58 -39.95 C-6.83 -48.14, -4.08 -56.34, -1.63 -63.65 M-9.58 -39.95 C-7.8 -45.26, -6.02 -50.57, -1.63 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(24.13395757646265 27.30449043551539) rotate(0 48.96085894414557 0)"><path d="M0 0 C16.32 0, 81.6 0, 97.92 0 M0 0 C16.32 0, 81.6 0, 97.92 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(24.13395757646265 27.30449043551539) rotate(0 48.96085894414557 0)"><path d="M74.43 8.55 C82.62 5.57, 90.81 2.59, 97.92 0 M74.43 8.55 C79.81 6.59, 85.19 4.63, 97.92 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(24.13395757646265 27.30449043551539) rotate(0 48.96085894414557 0)"><path d="M74.43 -8.55 C82.62 -5.57, 90.81 -2.59, 97.92 0 M74.43 -8.55 C79.81 -6.59, 85.19 -4.63, 97.92 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(164.48839498023267 325.9657175434131) rotate(0 46.92082315480616 0)"><path d="M0 0 C15.64 0, 78.2 0, 93.84 0 M0 0 C15.64 0, 78.2 0, 93.84 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(164.48839498023267 325.9657175434131) rotate(0 46.92082315480616 0)"><path d="M70.35 8.55 C76.19 6.42, 82.04 4.3, 93.84 0 M70.35 8.55 C76.02 6.49, 81.69 4.42, 93.84 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(164.48839498023267 325.9657175434131) rotate(0 46.92082315480616 0)"><path d="M70.35 -8.55 C76.19 -6.42, 82.04 -4.3, 93.84 0 M70.35 -8.55 C76.02 -6.49, 81.69 -4.42, 93.84 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(163.6723931158872 229.6760345122886) rotate(0 44.47278643329406 -0.8160174285833364)"><path d="M0 0 C14.82 -0.27, 74.12 -1.36, 88.95 -1.63 M0 0 C14.82 -0.27, 74.12 -1.36, 88.95 -1.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(163.6723931158872 229.6760345122886) rotate(0 44.47278643329406 -0.8160174285833364)"><path d="M65.61 7.35 C71.31 5.16, 77 2.97, 88.95 -1.63 M65.61 7.35 C72.57 4.67, 79.52 2, 88.95 -1.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(163.6723931158872 229.6760345122886) rotate(0 44.47278643329406 -0.8160174285833364)"><path d="M65.3 -9.75 C71.07 -7.77, 76.84 -5.79, 88.95 -1.63 M65.3 -9.75 C72.35 -7.33, 79.39 -4.91, 88.95 -1.63" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(272.2022597545723 310.4614642215191) rotate(0 -1.224002796518164 -33.048589125841005)"><path d="M0 0 C-0.41 -11.02, -2.04 -55.08, -2.45 -66.1 M0 0 C-0.41 -11.02, -2.04 -55.08, -2.45 -66.1" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(272.2022597545723 310.4614642215191) rotate(0 -1.224002796518164 -33.048589125841005)"><path d="M6.97 -42.94 C4.94 -47.91, 2.92 -52.88, -2.45 -66.1 M6.97 -42.94 C4.15 -49.86, 1.34 -56.78, -2.45 -66.1" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(272.2022597545723 310.4614642215191) rotate(0 -1.224002796518164 -33.048589125841005)"><path d="M-10.12 -42.3 C-8.48 -47.41, -6.83 -52.52, -2.45 -66.1 M-10.12 -42.3 C-7.83 -49.41, -5.54 -56.52, -2.45 -66.1" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(283.6264726262632 226.41199592643108) rotate(0 41.616748779609225 -0.40801649641062454)"><path d="M0 0 C13.87 -0.14, 69.36 -0.68, 83.23 -0.82 M0 0 C13.87 -0.14, 69.36 -0.68, 83.23 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(283.6264726262632 226.41199592643108) rotate(0 41.616748779609225 -0.40801649641062454)"><path d="M59.83 7.96 C68.32 4.78, 76.82 1.59, 83.23 -0.82 M59.83 7.96 C68.11 4.86, 76.39 1.75, 83.23 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(283.6264726262632 226.41199592643108) rotate(0 41.616748779609225 -0.40801649641062454)"><path d="M59.66 -9.14 C68.22 -6.12, 76.77 -3.1, 83.23 -0.82 M59.66 -9.14 C68 -6.19, 76.35 -3.25, 83.23 -0.82" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(290.97061391927537 318.6216073788768) rotate(0 40.39271485461529 -39.168696493859215)"><path d="M0 0 C13.46 -13.06, 67.32 -65.28, 80.79 -78.34 M0 0 C13.46 -13.06, 67.32 -65.28, 80.79 -78.34" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(290.97061391927537 318.6216073788768) rotate(0 40.39271485461529 -39.168696493859215)"><path d="M69.87 -55.84 C73.5 -63.32, 77.12 -70.79, 80.79 -78.34 M69.87 -55.84 C73.55 -63.42, 77.22 -70.99, 80.79 -78.34" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(290.97061391927537 318.6216073788768) rotate(0 40.39271485461529 -39.168696493859215)"><path d="M57.97 -68.12 C65.55 -71.52, 73.13 -74.91, 80.79 -78.34 M57.97 -68.12 C65.65 -71.56, 73.33 -75, 80.79 -78.34" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(383.9962583645423 245.99632082700379) rotate(0 1.224002796518164 28.968517547162236)"><path d="M0 0 C0.41 9.66, 2.04 48.28, 2.45 57.94 M0 0 C0.41 9.66, 2.04 48.28, 2.45 57.94" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(383.9962583645423 245.99632082700379) rotate(0 1.224002796518164 28.968517547162236)"><path d="M-7.09 34.83 C-3.41 43.74, 0.27 52.66, 2.45 57.94 M-7.09 34.83 C-3.82 42.74, -0.56 50.65, 2.45 57.94" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(383.9962583645423 245.99632082700379) rotate(0 1.224002796518164 28.968517547162236)"><path d="M10 34.1 C7.09 43.3, 4.17 52.49, 2.45 57.94 M10 34.1 C7.41 42.26, 4.83 50.42, 2.45 57.94" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(263.2261147328692 138.28242492418838) rotate(0 1.2240339249939893 35.08862491518039)"><path d="M0 0 C0.41 11.7, 2.04 58.48, 2.45 70.18 M0 0 C0.41 11.7, 2.04 58.48, 2.45 70.18" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(263.2261147328692 138.28242492418838) rotate(0 1.2240339249939893 35.08862491518039)"><path d="M-6.92 47 C-4.57 52.8, -2.23 58.6, 2.45 70.18 M-6.92 47 C-3.83 54.64, -0.74 62.28, 2.45 70.18" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(263.2261147328692 138.28242492418838) rotate(0 1.2240339249939893 35.08862491518039)"><path d="M10.17 46.4 C8.24 52.35, 6.31 58.31, 2.45 70.18 M10.17 46.4 C7.63 54.24, 5.08 62.07, 2.45 70.18" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(151.43217837985082 134.20235334550955) rotate(0 51.816927726306176 18.768354164703112)"><path d="M0 0 C17.27 6.26, 86.36 31.28, 103.63 37.54 M0 0 C17.27 6.26, 86.36 31.28, 103.63 37.54" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(277.914335061942 214.17175006191889) rotate(0 46.104821290460734 -40.39269929037738)"><path d="M0 0 C15.37 -13.46, 76.84 -67.32, 92.21 -80.79 M0 0 C15.37 -13.46, 76.84 -67.32, 92.21 -80.79" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(277.914335061942 214.17175006191889) rotate(0 46.104821290460734 -40.39269929037738)"><path d="M80.17 -58.87 C84.39 -66.55, 88.61 -74.23, 92.21 -80.79 M80.17 -58.87 C83.79 -65.46, 87.41 -72.04, 92.21 -80.79" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(277.914335061942 214.17175006191889) rotate(0 46.104821290460734 -40.39269929037738)"><path d="M68.9 -71.74 C77.07 -74.91, 85.24 -78.08, 92.21 -80.79 M68.9 -71.74 C75.91 -74.45, 82.91 -77.17, 92.21 -80.79" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(317.08304712003905 193.77142329700064) rotate(0 22.84842574338188 8.976145021703047)"><path d="M0 0 C7.62 2.99, 38.08 14.96, 45.7 17.95 M0 0 C7.62 2.99, 38.08 14.96, 45.7 17.95" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(317.08304712003905 193.77142329700064) rotate(0 22.84842574338188 8.976145021703047)"><path d="M21.16 17.33 C27.98 17.5, 34.8 17.68, 45.7 17.95 M21.16 17.33 C28.58 17.52, 36 17.71, 45.7 17.95" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(317.08304712003905 193.77142329700064) rotate(0 22.84842574338188 8.976145021703047)"><path d="M27.3 1.7 C32.41 6.22, 37.52 10.73, 45.7 17.95 M27.3 1.7 C32.86 6.62, 38.42 11.53, 45.7 17.95" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(298.31475521228754 187.24328386833395) rotate(0 -14.280250525375777 -4.89607344302425)"><path d="M0 0 C-4.76 -1.63, -23.8 -8.16, -28.56 -9.79 M0 0 C-4.76 -1.63, -23.8 -8.16, -28.56 -9.79" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(383.9962583645423 209.27567661889464) rotate(0 -0.8160329928212491 -35.90462677952584)"><path d="M0 0 C-0.27 -11.97, -1.36 -59.84, -1.63 -71.81 M0 0 C-0.27 -11.97, -1.36 -59.84, -1.63 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(383.9962583645423 209.27567661889464) rotate(0 -0.8160329928212491 -35.90462677952584)"><path d="M7.45 -48.52 C4.18 -56.92, 0.9 -65.31, -1.63 -71.81 M7.45 -48.52 C5.18 -54.34, 2.91 -60.16, -1.63 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(383.9962583645423 209.27567661889464) rotate(0 -0.8160329928212491 -35.90462677952584)"><path d="M-9.65 -48.13 C-6.76 -56.67, -3.87 -65.21, -1.63 -71.81 M-9.65 -48.13 C-7.64 -54.05, -5.64 -59.97, -1.63 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(126.1357470434325 72.18526223674428) rotate(0 -49.368859876318254 -17.952313389762935)"><path d="M0 0 C-16.46 -5.98, -82.28 -29.92, -98.74 -35.9 M0 0 C-16.46 -5.98, -82.28 -29.92, -98.74 -35.9" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(126.1357470434325 72.18526223674428) rotate(0 -49.368859876318254 -17.952313389762935)"><path d="M-73.74 -35.91 C-82.59 -35.91, -91.44 -35.91, -98.74 -35.9 M-73.74 -35.91 C-82.07 -35.91, -90.41 -35.91, -98.74 -35.9" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(126.1357470434325 72.18526223674428) rotate(0 -49.368859876318254 -17.952313389762935)"><path d="M-79.58 -19.84 C-86.36 -25.53, -93.14 -31.21, -98.74 -35.9 M-79.58 -19.84 C-85.97 -25.2, -92.36 -30.55, -98.74 -35.9" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(145.7200408155294 79.5294190939943) rotate(0 51.40892679413355 17.544281329114398)"><path d="M0 0 C17.14 5.85, 85.68 29.24, 102.82 35.09 M0 0 C17.14 5.85, 85.68 29.24, 102.82 35.09" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(260.77810913983285 104.009864130305) rotate(0 0 -31.82457076508493)"><path d="M0 0 C0 -10.61, 0 -53.04, 0 -63.65 M0 0 C0 -10.61, 0 -53.04, 0 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(260.77810913983285 104.009864130305) rotate(0 0 -31.82457076508493)"><path d="M8.55 -40.16 C6.36 -46.16, 4.18 -52.17, 0 -63.65 M8.55 -40.16 C6.35 -46.2, 4.15 -52.24, 0 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(260.77810913983285 104.009864130305) rotate(0 0 -31.82457076508493)"><path d="M-8.55 -40.16 C-6.36 -46.16, -4.18 -52.17, 0 -63.65 M-8.55 -40.16 C-6.35 -46.2, -4.15 -52.24, 0 -63.65" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(366.85997018548164 112.16999172342469) rotate(0 -46.104821290460734 -35.90463456164477)"><path d="M0 0 C-15.37 -11.97, -76.84 -59.84, -92.21 -71.81 M0 0 C-15.37 -11.97, -76.84 -59.84, -92.21 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(366.85997018548164 112.16999172342469) rotate(0 -46.104821290460734 -35.90463456164477)"><path d="M-68.42 -64.12 C-74.97 -66.24, -81.52 -68.36, -92.21 -71.81 M-68.42 -64.12 C-76.19 -66.63, -83.95 -69.14, -92.21 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(366.85997018548164 112.16999172342469) rotate(0 -46.104821290460734 -35.90463456164477)"><path d="M-78.93 -50.63 C-82.59 -56.46, -86.24 -62.29, -92.21 -71.81 M-78.93 -50.63 C-83.26 -57.54, -87.6 -64.46, -92.21 -71.81" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(379.100184921518 99.92979255162624) rotate(0 -0.40803206064850883 -30.192543690037212)"><path d="M0 0 C-0.14 -10.06, -0.68 -50.32, -0.82 -60.39 M0 0 C-0.14 -10.06, -0.68 -50.32, -0.82 -60.39" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(379.100184921518 99.92979255162624) rotate(0 -0.40803206064850883 -30.192543690037212)"><path d="M8.05 -37.01 C5.2 -44.54, 2.34 -52.06, -0.82 -60.39 M8.05 -37.01 C5.45 -43.88, 2.84 -50.75, -0.82 -60.39" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(379.100184921518 99.92979255162624) rotate(0 -0.40803206064850883 -30.192543690037212)"><path d="M-9.05 -36.78 C-6.4 -44.38, -3.75 -51.98, -0.82 -60.39 M-9.05 -36.78 C-6.63 -43.72, -4.21 -50.65, -0.82 -60.39" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(360.33183075681495 20.776382135324468) rotate(0 -43.24875250830013 0)"><path d="M0 0 C-14.42 0, -72.08 0, -86.5 0 M0 0 C-14.42 0, -72.08 0, -86.5 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(360.33183075681495 20.776382135324468) rotate(0 -43.24875250830013 0)"><path d="M-63.01 -8.55 C-68.93 -6.4, -74.85 -4.24, -86.5 0 M-63.01 -8.55 C-69.9 -6.04, -76.79 -3.53, -86.5 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g><g transform="translate(360.33183075681495 20.776382135324468) rotate(0 -43.24875250830013 0)"><path d="M-63.01 8.55 C-68.93 6.4, -74.85 4.24, -86.5 0 M-63.01 8.55 C-69.9 6.04, -76.79 3.53, -86.5 0" stroke="var(--md-code-fg-color)" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>

</div>

## DFS based algorithm

DFS will _finish_ processing a vertex \\(u\\) before its predecessor \\(p\\), i.e. \\(p*{post} \gt u*{post}\\). That is, root vertices will have the highest `post` and leaf vertices will have the lowest `post`. So laying out vertices in the descending order of \\(\text{post}\\) time will give us their topological ordering. Additionally, if we keep track of each vertex's color, we can also detect cycles (i.e. edge to a `GRAY` neighbour) and know when topological ordering is not possible.

=== "pseudocode"

    <span class="box" style="background-color: #e2f6d3;"></span> are lines added on top of standard DFS.

    <div markdown>
    $\ \ \ \ \ \ \ \ \underline{\text{TopologicalSort}()}$ <br>
    ${\small \ \ 1} \ \ \ \ \ \text{mark all vertices as WHITE}$ <br>
    <span class="added">${\small \ \ 1} \ \ \ \ \ sorting := []$ </span><br>
    ${\small \ \ 2} \ \ \ \ \ \textbf{for }s \in V \textbf{ do}$ <br>
    ${\small \ \ 3} \ \ \ \ \ \ \ \ \ \ \ \textbf{if }s \text{ is WHITE}\textbf{ then}$ <br>
    ${\small \ \ 4} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \text{sort}(s)$ <br>
    <span class="added">${\small \ \ 5} \ \ \ \ \ \text{return } sorting$ </span><br>
    ${\small \ \ 6}$ <br>
    ${\small \ \ 7} \ \ \ \ \ \underline{\text{sort}(s)}$ <br>
    ${\small \ \ 8} \ \ \ \ \ \text{mark }s \text{ as GRAY}$ <br>
    ${\small \ \ 9} \ \ \ \ \ \textbf{for }\text{each edge }(s, u) \in E\textbf{ do}$ <br>
    ${\small 10} \ \ \ \ \ \ \ \ \ \ \ \textbf{if }u \text{ is WHITE}\textbf{ then}$ <br>
    ${\small 11} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \text{sort}(u)$ <br>
    ${\small 12} \ \ \ \ \ \ \ \ \ \ \ \textbf{else if }u \text{ is GRAY}\textbf{ then}$ <br>
    ${\small 13} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \text{throw}(\text{cycle found})$ <br>
    ${\small 14} \ \ \ \ \ \text{mark }s \text{ as BLACK}$ <br>
    <span class="added">${\small 15} \ \ \ \ \ sorting := [s] + sorting$ </span> <br>

    </div>

=== "kotlin"

    ```kotlin linenums="1"
    fun Graph.topologicalSort(): List<Int>? {
      val result = ArrayList<Int>()
      val color = HashMap<Int, Color>()
      for (u in vertices)
        if (color.getOrDefault(u, Color.WHITE) == Color.WHITE)
          if (!topologicalSort(u, color, result))
            return null
      return result
    }

    fun Graph.topologicalSort(
      source: Int,
      color: HashMap<Int, Color>,
      result: ArrayList<Int>,
    ): Boolean {
      val stack = ArrayDeque<Record>().apply { this.add(Record(source)) }
      while (stack.isNotEmpty()) {
        val (u, explored) = stack.removeFirst()
        if (explored) {
          color[u] = Color.BLACK
          result.addFirst(u)
          continue
        }

        when(color[u]) {
          null, Color.WHITE -> {
            color[u] = Color.GRAY
            stack.addFirst(Record(u, true))
            for (v in neighbours(u))
              stack.addFirst(Record(v))
          }
          Color.GRAY -> return false
          else -> {}
        }
      }
      return true
    }

    enum class Color { WHITE, GRAY, BLACK }

    data class Record(val vertex: Int, val explored: Boolean = false)
    ```

## Kahn's algorithm

The general idea behind this solution is that topological ordering will place source vertices before sink vertices. So we begin by listing all source vertices first (i.e. \\(\text{in-degree} = 0\\)), followed by their neighbours, followed by their neighbour's neighbours and so on.

=== "pseudocode"

    <div markdown>
    $\ \ \ \ \ \ \ \ \underline{\text{TopologicalSort}()}$ <br>
    ${\small \ \ 1} \ \ \ \ \ sorting := []$ <br>
    ${\small \ \ 2} \ \ \ \ \ sources := \{v \in V \ | \ v.\text{indegree} = 0\}$ <br>
    ${\small \ \ 3}$ <br>
    ${\small \ \ 3} \ \ \ \ \ \textbf{while }sources \text{ is not empty}\textbf{ do}$ <br>
    ${\small \ \ 4} \ \ \ \ \ \ \ \ \ \ u := sources.\text{poll()}$ <br>
    ${\small \ \ 5} \ \ \ \ \ \ \ \ \ \ sorting.\text{offer}(u)$ <br>
    ${\small \ \ 5}$ <br>
    ${\small \ \ 7} \ \ \ \ \ \ \ \ \ \ \textbf{for}\text{ each edge } (u, v) \in E\textbf{ do}$ <br>
    ${\small \ \ 8} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \text{remove }(u, v) \text{ from } E$ <br>
    ${\small \ \ 9} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ v.\text{indegree} := v.\text{indegree} - 1$ <br>
    ${\small 10} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if }v.\text{indegree} = 0\textbf{ do}$ <br>
    ${\small 11} \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sources.\text{offer}(v)$ <br>
    ${\small 12}$ <br>
    ${\small 13} \ \ \ \ \ \textbf{if } |E| > 0 \textbf{ do}$ <br>
    ${\small 14} \ \ \ \ \ \ \ \ \ \ \ \text{throw}(\text{cycle found})$ <br>
    ${\small 15} \ \ \ \ \ \text{return } sorting$ <br>
    </div>

=== "kotlin"

    ```kotlin linenums="1"
    fun Graph.topologicalSort(): List<Int>? {
      val degree = HashMap<Int, Int>()
      for (u in vertices) {
        degree.putIfAbsent(u, 0)
        for (v in neighbours(u))
          degree[v] = (degree[v] ?: 0) + 1
      }

      val result = ArrayList<Int>()
      val queue = degree.filter { it.value == 0 }.map { it.key }.toCollection(ArrayList())
      while (queue.isNotEmpty()) {
        val u = queue.removeFirst()
        result.add(u)

        for (v in neighbours(u)) {
          degree[v] = (degree[v] ?: 0) - 1
          if (degree[v] == 0) queue.add(v)
        }
      }

      if (degree.map { it.value }.sum() > 0) return null
      return result
    }
    ```

</div>
